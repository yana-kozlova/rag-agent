"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@auth+drizzle-adapter@1.11.0";
exports.ids = ["vendor-chunks/@auth+drizzle-adapter@1.11.0"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/index.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/index.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DrizzleAdapter: () => (/* binding */ DrizzleAdapter)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/entity.js\");\n/* harmony import */ var drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm/mysql-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/mysql-core/db.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/pg-core/db.js\");\n/* harmony import */ var drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm/sqlite-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/sqlite-core/db.js\");\n/* harmony import */ var _lib_mysql_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/mysql.js */ \"(rsc)/./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/mysql.js\");\n/* harmony import */ var _lib_pg_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/pg.js */ \"(rsc)/./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/pg.js\");\n/* harmony import */ var _lib_sqlite_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/sqlite.js */ \"(rsc)/./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/sqlite.js\");\n/**\n * <div style={{display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", padding: 16}}>\n *  <p>Official <a href=\"https://orm.drizzle.team\">Drizzle ORM</a> adapter for Auth.js / NextAuth.js.</p>\n *  <a href=\"https://orm.drizzle.team\">\n *   <img style={{display: \"block\"}} src=\"/img/adapters/drizzle.svg\" width=\"38\" />\n *  </a>\n * </div>\n *\n * ## Installation\n *\n * ```bash npm2yarn\n * npm install drizzle-orm @auth/drizzle-adapter\n * npm install drizzle-kit --save-dev\n * ```\n *\n * @module @auth/drizzle-adapter\n */\n\n\n\n\n\n\n\nfunction DrizzleAdapter(db, schema) {\n    if ((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.is)(db, drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_4__.MySqlDatabase)) {\n        return (0,_lib_mysql_js__WEBPACK_IMPORTED_MODULE_0__.MySqlDrizzleAdapter)(db, schema);\n    }\n    else if ((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.is)(db, drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.PgDatabase)) {\n        return (0,_lib_pg_js__WEBPACK_IMPORTED_MODULE_1__.PostgresDrizzleAdapter)(db, schema);\n    }\n    else if ((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.is)(db, drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_6__.BaseSQLiteDatabase)) {\n        return (0,_lib_sqlite_js__WEBPACK_IMPORTED_MODULE_2__.SQLiteDrizzleAdapter)(db, schema);\n    }\n    throw new Error(`Unsupported database type (${typeof db}) in Auth.js Drizzle adapter.`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgrZHJpenpsZS1hZGFwdGVyQDEuMTEuMC9ub2RlX21vZHVsZXMvQGF1dGgvZHJpenpsZS1hZGFwdGVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQSxnQkFBZ0IscUZBQXFGO0FBQ3JHO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNpQztBQUNzQjtBQUNOO0FBQ1k7QUFDUjtBQUNBO0FBQ0U7QUFDaEQ7QUFDUCxRQUFRLCtDQUFFLEtBQUssaUVBQWE7QUFDNUIsZUFBZSxrRUFBbUI7QUFDbEM7QUFDQSxhQUFhLCtDQUFFLEtBQUssMkRBQVU7QUFDOUIsZUFBZSxrRUFBc0I7QUFDckM7QUFDQSxhQUFhLCtDQUFFLEtBQUssdUVBQWtCO0FBQ3RDLGVBQWUsb0VBQW9CO0FBQ25DO0FBQ0Esa0RBQWtELFVBQVU7QUFDNUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXN0LWFwcGxpY2F0aW9uLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoK2RyaXp6bGUtYWRhcHRlckAxLjExLjAvbm9kZV9tb2R1bGVzL0BhdXRoL2RyaXp6bGUtYWRhcHRlci9pbmRleC5qcz85YmU3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogPGRpdiBzdHlsZT17e2Rpc3BsYXk6IFwiZmxleFwiLCBqdXN0aWZ5Q29udGVudDogXCJzcGFjZS1iZXR3ZWVuXCIsIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsIHBhZGRpbmc6IDE2fX0+XG4gKiAgPHA+T2ZmaWNpYWwgPGEgaHJlZj1cImh0dHBzOi8vb3JtLmRyaXp6bGUudGVhbVwiPkRyaXp6bGUgT1JNPC9hPiBhZGFwdGVyIGZvciBBdXRoLmpzIC8gTmV4dEF1dGguanMuPC9wPlxuICogIDxhIGhyZWY9XCJodHRwczovL29ybS5kcml6emxlLnRlYW1cIj5cbiAqICAgPGltZyBzdHlsZT17e2Rpc3BsYXk6IFwiYmxvY2tcIn19IHNyYz1cIi9pbWcvYWRhcHRlcnMvZHJpenpsZS5zdmdcIiB3aWR0aD1cIjM4XCIgLz5cbiAqICA8L2E+XG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBgYGBiYXNoIG5wbTJ5YXJuXG4gKiBucG0gaW5zdGFsbCBkcml6emxlLW9ybSBAYXV0aC9kcml6emxlLWFkYXB0ZXJcbiAqIG5wbSBpbnN0YWxsIGRyaXp6bGUta2l0IC0tc2F2ZS1kZXZcbiAqIGBgYFxuICpcbiAqIEBtb2R1bGUgQGF1dGgvZHJpenpsZS1hZGFwdGVyXG4gKi9cbmltcG9ydCB7IGlzIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5pbXBvcnQgeyBNeVNxbERhdGFiYXNlIH0gZnJvbSBcImRyaXp6bGUtb3JtL215c3FsLWNvcmVcIjtcbmltcG9ydCB7IFBnRGF0YWJhc2UgfSBmcm9tIFwiZHJpenpsZS1vcm0vcGctY29yZVwiO1xuaW1wb3J0IHsgQmFzZVNRTGl0ZURhdGFiYXNlIH0gZnJvbSBcImRyaXp6bGUtb3JtL3NxbGl0ZS1jb3JlXCI7XG5pbXBvcnQgeyBNeVNxbERyaXp6bGVBZGFwdGVyIH0gZnJvbSBcIi4vbGliL215c3FsLmpzXCI7XG5pbXBvcnQgeyBQb3N0Z3Jlc0RyaXp6bGVBZGFwdGVyIH0gZnJvbSBcIi4vbGliL3BnLmpzXCI7XG5pbXBvcnQgeyBTUUxpdGVEcml6emxlQWRhcHRlciB9IGZyb20gXCIuL2xpYi9zcWxpdGUuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBEcml6emxlQWRhcHRlcihkYiwgc2NoZW1hKSB7XG4gICAgaWYgKGlzKGRiLCBNeVNxbERhdGFiYXNlKSkge1xuICAgICAgICByZXR1cm4gTXlTcWxEcml6emxlQWRhcHRlcihkYiwgc2NoZW1hKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXMoZGIsIFBnRGF0YWJhc2UpKSB7XG4gICAgICAgIHJldHVybiBQb3N0Z3Jlc0RyaXp6bGVBZGFwdGVyKGRiLCBzY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpcyhkYiwgQmFzZVNRTGl0ZURhdGFiYXNlKSkge1xuICAgICAgICByZXR1cm4gU1FMaXRlRHJpenpsZUFkYXB0ZXIoZGIsIHNjaGVtYSk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgZGF0YWJhc2UgdHlwZSAoJHt0eXBlb2YgZGJ9KSBpbiBBdXRoLmpzIERyaXp6bGUgYWRhcHRlci5gKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/mysql.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/mysql.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MySqlDrizzleAdapter: () => (/* binding */ MySqlDrizzleAdapter),\n/* harmony export */   defineTables: () => (/* binding */ defineTables)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/utils.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm/mysql-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/mysql-core/table.js\");\n/* harmony import */ var drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/mysql-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/mysql-core/columns/varchar.js\");\n/* harmony import */ var drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/mysql-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/mysql-core/columns/timestamp.js\");\n/* harmony import */ var drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm/mysql-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/mysql-core/columns/int.js\");\n/* harmony import */ var drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm/mysql-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/mysql-core/primary-keys.js\");\n/* harmony import */ var drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm/mysql-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/mysql-core/columns/boolean.js\");\n\n\nfunction defineTables(schema = {}) {\n    const usersTable = schema.usersTable ??\n        ((0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_0__.mysqlTable)(\"user\", {\n            id: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"id\", { length: 255 })\n                .primaryKey()\n                .$defaultFn(() => crypto.randomUUID()),\n            name: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"name\", { length: 255 }),\n            email: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"email\", { length: 255 }).unique(),\n            emailVerified: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_2__.timestamp)(\"emailVerified\", { mode: \"date\", fsp: 3 }),\n            image: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"image\", { length: 255 }),\n        }));\n    const accountsTable = schema.accountsTable ??\n        ((0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_0__.mysqlTable)(\"account\", {\n            userId: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"userId\", { length: 255 })\n                .notNull()\n                .references(() => usersTable.id, { onDelete: \"cascade\" }),\n            type: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"type\", { length: 255 })\n                .$type()\n                .notNull(),\n            provider: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"provider\", { length: 255 }).notNull(),\n            providerAccountId: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"providerAccountId\", {\n                length: 255,\n            }).notNull(),\n            refresh_token: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"refresh_token\", { length: 255 }),\n            access_token: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"access_token\", { length: 255 }),\n            expires_at: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_3__.int)(\"expires_at\"),\n            token_type: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"token_type\", { length: 255 }),\n            scope: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"scope\", { length: 255 }),\n            id_token: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"id_token\", { length: 2048 }),\n            session_state: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"session_state\", { length: 255 }),\n        }, (account) => ({\n            compositePk: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_4__.primaryKey)({\n                columns: [account.provider, account.providerAccountId],\n            }),\n        })));\n    const sessionsTable = schema.sessionsTable ??\n        ((0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_0__.mysqlTable)(\"session\", {\n            sessionToken: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"sessionToken\", { length: 255 }).primaryKey(),\n            userId: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"userId\", { length: 255 })\n                .notNull()\n                .references(() => usersTable.id, { onDelete: \"cascade\" }),\n            expires: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_2__.timestamp)(\"expires\", { mode: \"date\" }).notNull(),\n        }));\n    const verificationTokensTable = schema.verificationTokensTable ??\n        ((0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_0__.mysqlTable)(\"verificationToken\", {\n            identifier: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"identifier\", { length: 255 }).notNull(),\n            token: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"token\", { length: 255 }).notNull(),\n            expires: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_2__.timestamp)(\"expires\", { mode: \"date\" }).notNull(),\n        }, (verficationToken) => ({\n            compositePk: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_4__.primaryKey)({\n                columns: [verficationToken.identifier, verficationToken.token],\n            }),\n        })));\n    const authenticatorsTable = schema.authenticatorsTable ??\n        ((0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_0__.mysqlTable)(\"authenticator\", {\n            credentialID: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"credentialID\", { length: 255 })\n                .notNull()\n                .unique(),\n            userId: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"userId\", { length: 255 })\n                .notNull()\n                .references(() => usersTable.id, { onDelete: \"cascade\" }),\n            providerAccountId: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"providerAccountId\", {\n                length: 255,\n            }).notNull(),\n            credentialPublicKey: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"credentialPublicKey\", {\n                length: 255,\n            }).notNull(),\n            counter: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_3__.int)(\"counter\").notNull(),\n            credentialDeviceType: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"credentialDeviceType\", {\n                length: 255,\n            }).notNull(),\n            credentialBackedUp: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_5__.boolean)(\"credentialBackedUp\").notNull(),\n            transports: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_1__.varchar)(\"transports\", { length: 255 }),\n        }, (authenticator) => ({\n            compositePk: (0,drizzle_orm_mysql_core__WEBPACK_IMPORTED_MODULE_4__.primaryKey)({\n                columns: [authenticator.userId, authenticator.credentialID],\n            }),\n        })));\n    return {\n        usersTable,\n        accountsTable,\n        sessionsTable,\n        verificationTokensTable,\n        authenticatorsTable,\n    };\n}\nfunction MySqlDrizzleAdapter(client, schema) {\n    const { usersTable, accountsTable, sessionsTable, verificationTokensTable, authenticatorsTable, } = defineTables(schema);\n    return {\n        async createUser(data) {\n            const { id, ...insertData } = data;\n            const hasDefaultId = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.getTableColumns)(usersTable)[\"id\"][\"defaultFn\"];\n            const [insertedUser] = (await client\n                .insert(usersTable)\n                .values(hasDefaultId ? insertData : { ...insertData, id })\n                .$returningId());\n            return client\n                .select()\n                .from(usersTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.id, insertedUser ? insertedUser.id : id))\n                .then((res) => res[0]);\n        },\n        async getUser(userId) {\n            return client\n                .select()\n                .from(usersTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.id, userId))\n                .then((res) => res.length > 0 ? res[0] : null);\n        },\n        async getUserByEmail(email) {\n            return client\n                .select()\n                .from(usersTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.email, email))\n                .then((res) => res.length > 0 ? res[0] : null);\n        },\n        async createSession(data) {\n            await client.insert(sessionsTable).values(data);\n            return client\n                .select()\n                .from(sessionsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(sessionsTable.sessionToken, data.sessionToken))\n                .then((res) => res[0]);\n        },\n        async getSessionAndUser(sessionToken) {\n            return client\n                .select({\n                session: sessionsTable,\n                user: usersTable,\n            })\n                .from(sessionsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(sessionsTable.sessionToken, sessionToken))\n                .innerJoin(usersTable, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.id, sessionsTable.userId))\n                .then((res) => (res.length > 0 ? res[0] : null));\n        },\n        async updateUser(data) {\n            if (!data.id) {\n                throw new Error(\"No user id.\");\n            }\n            await client\n                .update(usersTable)\n                .set(data)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.id, data.id));\n            const [result] = await client\n                .select()\n                .from(usersTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.id, data.id));\n            if (!result) {\n                throw new Error(\"No user found.\");\n            }\n            return result;\n        },\n        async updateSession(data) {\n            await client\n                .update(sessionsTable)\n                .set(data)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(sessionsTable.sessionToken, data.sessionToken));\n            return client\n                .select()\n                .from(sessionsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(sessionsTable.sessionToken, data.sessionToken))\n                .then((res) => res[0]);\n        },\n        async linkAccount(data) {\n            await client.insert(accountsTable).values(data);\n        },\n        async getUserByAccount(account) {\n            const result = await client\n                .select({\n                account: accountsTable,\n                user: usersTable,\n            })\n                .from(accountsTable)\n                .innerJoin(usersTable, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.userId, usersTable.id))\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.provider, account.provider), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.providerAccountId, account.providerAccountId)))\n                .then((res) => res[0]);\n            const user = result?.user ?? null;\n            return user;\n        },\n        async deleteSession(sessionToken) {\n            await client\n                .delete(sessionsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(sessionsTable.sessionToken, sessionToken));\n        },\n        async createVerificationToken(data) {\n            await client.insert(verificationTokensTable).values(data);\n            return client\n                .select()\n                .from(verificationTokensTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(verificationTokensTable.identifier, data.identifier))\n                .then((res) => res[0]);\n        },\n        async useVerificationToken(params) {\n            const deletedToken = await client\n                .select()\n                .from(verificationTokensTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(verificationTokensTable.identifier, params.identifier), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(verificationTokensTable.token, params.token)))\n                .then((res) => (res.length > 0 ? res[0] : null));\n            if (deletedToken) {\n                await client\n                    .delete(verificationTokensTable)\n                    .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(verificationTokensTable.identifier, params.identifier), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(verificationTokensTable.token, params.token)));\n            }\n            return deletedToken;\n        },\n        async deleteUser(id) {\n            await client.delete(usersTable).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.id, id));\n        },\n        async unlinkAccount(params) {\n            await client\n                .delete(accountsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.provider, params.provider), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.providerAccountId, params.providerAccountId)));\n        },\n        async getAccount(providerAccountId, provider) {\n            return client\n                .select()\n                .from(accountsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.provider, provider), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.providerAccountId, providerAccountId)))\n                .then((res) => res[0] ?? null);\n        },\n        async createAuthenticator(data) {\n            await client.insert(authenticatorsTable).values(data);\n            return (await client\n                .select()\n                .from(authenticatorsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(authenticatorsTable.credentialID, data.credentialID))\n                .then((res) => res[0] ?? null));\n        },\n        async getAuthenticator(credentialID) {\n            return (await client\n                .select()\n                .from(authenticatorsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(authenticatorsTable.credentialID, credentialID))\n                .then((res) => res[0] ?? null));\n        },\n        async listAuthenticatorsByUserId(userId) {\n            return (await client\n                .select()\n                .from(authenticatorsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(authenticatorsTable.userId, userId))\n                .then((res) => res));\n        },\n        async updateAuthenticatorCounter(credentialID, newCounter) {\n            await client\n                .update(authenticatorsTable)\n                .set({ counter: newCounter })\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(authenticatorsTable.credentialID, credentialID));\n            const authenticator = await client\n                .select()\n                .from(authenticatorsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(authenticatorsTable.credentialID, credentialID))\n                .then((res) => res[0]);\n            if (!authenticator)\n                throw new Error(\"Authenticator not found.\");\n            return authenticator;\n        },\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgrZHJpenpsZS1hZGFwdGVyQDEuMTEuMC9ub2RlX21vZHVsZXMvQGF1dGgvZHJpenpsZS1hZGFwdGVyL2xpYi9teXNxbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXVEO0FBQzRDO0FBQzVGLGlDQUFpQztBQUN4QztBQUNBLFNBQVMsa0VBQVU7QUFDbkIsZ0JBQWdCLCtEQUFPLFNBQVMsYUFBYTtBQUM3QztBQUNBO0FBQ0Esa0JBQWtCLCtEQUFPLFdBQVcsYUFBYTtBQUNqRCxtQkFBbUIsK0RBQU8sWUFBWSxhQUFhO0FBQ25ELDJCQUEyQixpRUFBUyxvQkFBb0Isc0JBQXNCO0FBQzlFLG1CQUFtQiwrREFBTyxZQUFZLGFBQWE7QUFDbkQsU0FBUztBQUNUO0FBQ0EsU0FBUyxrRUFBVTtBQUNuQixvQkFBb0IsK0RBQU8sYUFBYSxhQUFhO0FBQ3JEO0FBQ0EsbURBQW1ELHFCQUFxQjtBQUN4RSxrQkFBa0IsK0RBQU8sV0FBVyxhQUFhO0FBQ2pEO0FBQ0E7QUFDQSxzQkFBc0IsK0RBQU8sZUFBZSxhQUFhO0FBQ3pELCtCQUErQiwrREFBTztBQUN0QztBQUNBLGFBQWE7QUFDYiwyQkFBMkIsK0RBQU8sb0JBQW9CLGFBQWE7QUFDbkUsMEJBQTBCLCtEQUFPLG1CQUFtQixhQUFhO0FBQ2pFLHdCQUF3QiwyREFBRztBQUMzQix3QkFBd0IsK0RBQU8saUJBQWlCLGFBQWE7QUFDN0QsbUJBQW1CLCtEQUFPLFlBQVksYUFBYTtBQUNuRCxzQkFBc0IsK0RBQU8sZUFBZSxjQUFjO0FBQzFELDJCQUEyQiwrREFBTyxvQkFBb0IsYUFBYTtBQUNuRSxTQUFTO0FBQ1QseUJBQXlCLGtFQUFVO0FBQ25DO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLFNBQVMsa0VBQVU7QUFDbkIsMEJBQTBCLCtEQUFPLG1CQUFtQixhQUFhO0FBQ2pFLG9CQUFvQiwrREFBTyxhQUFhLGFBQWE7QUFDckQ7QUFDQSxtREFBbUQscUJBQXFCO0FBQ3hFLHFCQUFxQixpRUFBUyxjQUFjLGNBQWM7QUFDMUQsU0FBUztBQUNUO0FBQ0EsU0FBUyxrRUFBVTtBQUNuQix3QkFBd0IsK0RBQU8saUJBQWlCLGFBQWE7QUFDN0QsbUJBQW1CLCtEQUFPLFlBQVksYUFBYTtBQUNuRCxxQkFBcUIsaUVBQVMsY0FBYyxjQUFjO0FBQzFELFNBQVM7QUFDVCx5QkFBeUIsa0VBQVU7QUFDbkM7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0EsU0FBUyxrRUFBVTtBQUNuQiwwQkFBMEIsK0RBQU8sbUJBQW1CLGFBQWE7QUFDakU7QUFDQTtBQUNBLG9CQUFvQiwrREFBTyxhQUFhLGFBQWE7QUFDckQ7QUFDQSxtREFBbUQscUJBQXFCO0FBQ3hFLCtCQUErQiwrREFBTztBQUN0QztBQUNBLGFBQWE7QUFDYixpQ0FBaUMsK0RBQU87QUFDeEM7QUFDQSxhQUFhO0FBQ2IscUJBQXFCLDJEQUFHO0FBQ3hCLGtDQUFrQywrREFBTztBQUN6QztBQUNBLGFBQWE7QUFDYixnQ0FBZ0MsK0RBQU87QUFDdkMsd0JBQXdCLCtEQUFPLGlCQUFpQixhQUFhO0FBQzdELFNBQVM7QUFDVCx5QkFBeUIsa0VBQVU7QUFDbkM7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksMEZBQTBGO0FBQ3RHO0FBQ0E7QUFDQSxvQkFBb0Isb0JBQW9CO0FBQ3hDLGlDQUFpQyw0REFBZTtBQUNoRDtBQUNBO0FBQ0Esc0RBQXNELG1CQUFtQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBRTtBQUN6QjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBRTtBQUN6QjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBRTtBQUN6QjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFFO0FBQ3pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx1QkFBdUIsK0NBQUU7QUFDekIsdUNBQXVDLCtDQUFFO0FBQ3pDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFFO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBRTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBRTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0NBQUU7QUFDekI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsdUNBQXVDLCtDQUFFO0FBQ3pDLHVCQUF1QixnREFBRyxDQUFDLCtDQUFFLDRDQUE0QywrQ0FBRTtBQUMzRTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFFO0FBQ3pCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFFO0FBQ3pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdEQUFHLENBQUMsK0NBQUUseURBQXlELCtDQUFFO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGdEQUFHLENBQUMsK0NBQUUseURBQXlELCtDQUFFO0FBQzVGO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxrREFBa0QsK0NBQUU7QUFDcEQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixnREFBRyxDQUFDLCtDQUFFLDJDQUEyQywrQ0FBRTtBQUMxRSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0RBQUcsQ0FBQywrQ0FBRSxvQ0FBb0MsK0NBQUU7QUFDbkU7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBRTtBQUN6QjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBRTtBQUN6QjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBRTtBQUN6QjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscUJBQXFCO0FBQzVDLHVCQUF1QiwrQ0FBRTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0NBQUU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Rlc3QtYXBwbGljYXRpb24vLi9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgrZHJpenpsZS1hZGFwdGVyQDEuMTEuMC9ub2RlX21vZHVsZXMvQGF1dGgvZHJpenpsZS1hZGFwdGVyL2xpYi9teXNxbC5qcz8wNDVlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFuZCwgZXEsIGdldFRhYmxlQ29sdW1ucyB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuaW1wb3J0IHsgYm9vbGVhbiwgaW50LCBteXNxbFRhYmxlLCBwcmltYXJ5S2V5LCB0aW1lc3RhbXAsIHZhcmNoYXIsIH0gZnJvbSBcImRyaXp6bGUtb3JtL215c3FsLWNvcmVcIjtcbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVUYWJsZXMoc2NoZW1hID0ge30pIHtcbiAgICBjb25zdCB1c2Vyc1RhYmxlID0gc2NoZW1hLnVzZXJzVGFibGUgPz9cbiAgICAgICAgKG15c3FsVGFibGUoXCJ1c2VyXCIsIHtcbiAgICAgICAgICAgIGlkOiB2YXJjaGFyKFwiaWRcIiwgeyBsZW5ndGg6IDI1NSB9KVxuICAgICAgICAgICAgICAgIC5wcmltYXJ5S2V5KClcbiAgICAgICAgICAgICAgICAuJGRlZmF1bHRGbigoKSA9PiBjcnlwdG8ucmFuZG9tVVVJRCgpKSxcbiAgICAgICAgICAgIG5hbWU6IHZhcmNoYXIoXCJuYW1lXCIsIHsgbGVuZ3RoOiAyNTUgfSksXG4gICAgICAgICAgICBlbWFpbDogdmFyY2hhcihcImVtYWlsXCIsIHsgbGVuZ3RoOiAyNTUgfSkudW5pcXVlKCksXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB0aW1lc3RhbXAoXCJlbWFpbFZlcmlmaWVkXCIsIHsgbW9kZTogXCJkYXRlXCIsIGZzcDogMyB9KSxcbiAgICAgICAgICAgIGltYWdlOiB2YXJjaGFyKFwiaW1hZ2VcIiwgeyBsZW5ndGg6IDI1NSB9KSxcbiAgICAgICAgfSkpO1xuICAgIGNvbnN0IGFjY291bnRzVGFibGUgPSBzY2hlbWEuYWNjb3VudHNUYWJsZSA/P1xuICAgICAgICAobXlzcWxUYWJsZShcImFjY291bnRcIiwge1xuICAgICAgICAgICAgdXNlcklkOiB2YXJjaGFyKFwidXNlcklkXCIsIHsgbGVuZ3RoOiAyNTUgfSlcbiAgICAgICAgICAgICAgICAubm90TnVsbCgpXG4gICAgICAgICAgICAgICAgLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnNUYWJsZS5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gICAgICAgICAgICB0eXBlOiB2YXJjaGFyKFwidHlwZVwiLCB7IGxlbmd0aDogMjU1IH0pXG4gICAgICAgICAgICAgICAgLiR0eXBlKClcbiAgICAgICAgICAgICAgICAubm90TnVsbCgpLFxuICAgICAgICAgICAgcHJvdmlkZXI6IHZhcmNoYXIoXCJwcm92aWRlclwiLCB7IGxlbmd0aDogMjU1IH0pLm5vdE51bGwoKSxcbiAgICAgICAgICAgIHByb3ZpZGVyQWNjb3VudElkOiB2YXJjaGFyKFwicHJvdmlkZXJBY2NvdW50SWRcIiwge1xuICAgICAgICAgICAgICAgIGxlbmd0aDogMjU1LFxuICAgICAgICAgICAgfSkubm90TnVsbCgpLFxuICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogdmFyY2hhcihcInJlZnJlc2hfdG9rZW5cIiwgeyBsZW5ndGg6IDI1NSB9KSxcbiAgICAgICAgICAgIGFjY2Vzc190b2tlbjogdmFyY2hhcihcImFjY2Vzc190b2tlblwiLCB7IGxlbmd0aDogMjU1IH0pLFxuICAgICAgICAgICAgZXhwaXJlc19hdDogaW50KFwiZXhwaXJlc19hdFwiKSxcbiAgICAgICAgICAgIHRva2VuX3R5cGU6IHZhcmNoYXIoXCJ0b2tlbl90eXBlXCIsIHsgbGVuZ3RoOiAyNTUgfSksXG4gICAgICAgICAgICBzY29wZTogdmFyY2hhcihcInNjb3BlXCIsIHsgbGVuZ3RoOiAyNTUgfSksXG4gICAgICAgICAgICBpZF90b2tlbjogdmFyY2hhcihcImlkX3Rva2VuXCIsIHsgbGVuZ3RoOiAyMDQ4IH0pLFxuICAgICAgICAgICAgc2Vzc2lvbl9zdGF0ZTogdmFyY2hhcihcInNlc3Npb25fc3RhdGVcIiwgeyBsZW5ndGg6IDI1NSB9KSxcbiAgICAgICAgfSwgKGFjY291bnQpID0+ICh7XG4gICAgICAgICAgICBjb21wb3NpdGVQazogcHJpbWFyeUtleSh7XG4gICAgICAgICAgICAgICAgY29sdW1uczogW2FjY291bnQucHJvdmlkZXIsIGFjY291bnQucHJvdmlkZXJBY2NvdW50SWRdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pKSk7XG4gICAgY29uc3Qgc2Vzc2lvbnNUYWJsZSA9IHNjaGVtYS5zZXNzaW9uc1RhYmxlID8/XG4gICAgICAgIChteXNxbFRhYmxlKFwic2Vzc2lvblwiLCB7XG4gICAgICAgICAgICBzZXNzaW9uVG9rZW46IHZhcmNoYXIoXCJzZXNzaW9uVG9rZW5cIiwgeyBsZW5ndGg6IDI1NSB9KS5wcmltYXJ5S2V5KCksXG4gICAgICAgICAgICB1c2VySWQ6IHZhcmNoYXIoXCJ1c2VySWRcIiwgeyBsZW5ndGg6IDI1NSB9KVxuICAgICAgICAgICAgICAgIC5ub3ROdWxsKClcbiAgICAgICAgICAgICAgICAucmVmZXJlbmNlcygoKSA9PiB1c2Vyc1RhYmxlLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgICAgICAgIGV4cGlyZXM6IHRpbWVzdGFtcChcImV4cGlyZXNcIiwgeyBtb2RlOiBcImRhdGVcIiB9KS5ub3ROdWxsKCksXG4gICAgICAgIH0pKTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25Ub2tlbnNUYWJsZSA9IHNjaGVtYS52ZXJpZmljYXRpb25Ub2tlbnNUYWJsZSA/P1xuICAgICAgICAobXlzcWxUYWJsZShcInZlcmlmaWNhdGlvblRva2VuXCIsIHtcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IHZhcmNoYXIoXCJpZGVudGlmaWVyXCIsIHsgbGVuZ3RoOiAyNTUgfSkubm90TnVsbCgpLFxuICAgICAgICAgICAgdG9rZW46IHZhcmNoYXIoXCJ0b2tlblwiLCB7IGxlbmd0aDogMjU1IH0pLm5vdE51bGwoKSxcbiAgICAgICAgICAgIGV4cGlyZXM6IHRpbWVzdGFtcChcImV4cGlyZXNcIiwgeyBtb2RlOiBcImRhdGVcIiB9KS5ub3ROdWxsKCksXG4gICAgICAgIH0sICh2ZXJmaWNhdGlvblRva2VuKSA9PiAoe1xuICAgICAgICAgICAgY29tcG9zaXRlUGs6IHByaW1hcnlLZXkoe1xuICAgICAgICAgICAgICAgIGNvbHVtbnM6IFt2ZXJmaWNhdGlvblRva2VuLmlkZW50aWZpZXIsIHZlcmZpY2F0aW9uVG9rZW4udG9rZW5dLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pKSk7XG4gICAgY29uc3QgYXV0aGVudGljYXRvcnNUYWJsZSA9IHNjaGVtYS5hdXRoZW50aWNhdG9yc1RhYmxlID8/XG4gICAgICAgIChteXNxbFRhYmxlKFwiYXV0aGVudGljYXRvclwiLCB7XG4gICAgICAgICAgICBjcmVkZW50aWFsSUQ6IHZhcmNoYXIoXCJjcmVkZW50aWFsSURcIiwgeyBsZW5ndGg6IDI1NSB9KVxuICAgICAgICAgICAgICAgIC5ub3ROdWxsKClcbiAgICAgICAgICAgICAgICAudW5pcXVlKCksXG4gICAgICAgICAgICB1c2VySWQ6IHZhcmNoYXIoXCJ1c2VySWRcIiwgeyBsZW5ndGg6IDI1NSB9KVxuICAgICAgICAgICAgICAgIC5ub3ROdWxsKClcbiAgICAgICAgICAgICAgICAucmVmZXJlbmNlcygoKSA9PiB1c2Vyc1RhYmxlLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgICAgICAgIHByb3ZpZGVyQWNjb3VudElkOiB2YXJjaGFyKFwicHJvdmlkZXJBY2NvdW50SWRcIiwge1xuICAgICAgICAgICAgICAgIGxlbmd0aDogMjU1LFxuICAgICAgICAgICAgfSkubm90TnVsbCgpLFxuICAgICAgICAgICAgY3JlZGVudGlhbFB1YmxpY0tleTogdmFyY2hhcihcImNyZWRlbnRpYWxQdWJsaWNLZXlcIiwge1xuICAgICAgICAgICAgICAgIGxlbmd0aDogMjU1LFxuICAgICAgICAgICAgfSkubm90TnVsbCgpLFxuICAgICAgICAgICAgY291bnRlcjogaW50KFwiY291bnRlclwiKS5ub3ROdWxsKCksXG4gICAgICAgICAgICBjcmVkZW50aWFsRGV2aWNlVHlwZTogdmFyY2hhcihcImNyZWRlbnRpYWxEZXZpY2VUeXBlXCIsIHtcbiAgICAgICAgICAgICAgICBsZW5ndGg6IDI1NSxcbiAgICAgICAgICAgIH0pLm5vdE51bGwoKSxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxCYWNrZWRVcDogYm9vbGVhbihcImNyZWRlbnRpYWxCYWNrZWRVcFwiKS5ub3ROdWxsKCksXG4gICAgICAgICAgICB0cmFuc3BvcnRzOiB2YXJjaGFyKFwidHJhbnNwb3J0c1wiLCB7IGxlbmd0aDogMjU1IH0pLFxuICAgICAgICB9LCAoYXV0aGVudGljYXRvcikgPT4gKHtcbiAgICAgICAgICAgIGNvbXBvc2l0ZVBrOiBwcmltYXJ5S2V5KHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiBbYXV0aGVudGljYXRvci51c2VySWQsIGF1dGhlbnRpY2F0b3IuY3JlZGVudGlhbElEXSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVzZXJzVGFibGUsXG4gICAgICAgIGFjY291bnRzVGFibGUsXG4gICAgICAgIHNlc3Npb25zVGFibGUsXG4gICAgICAgIHZlcmlmaWNhdGlvblRva2Vuc1RhYmxlLFxuICAgICAgICBhdXRoZW50aWNhdG9yc1RhYmxlLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gTXlTcWxEcml6emxlQWRhcHRlcihjbGllbnQsIHNjaGVtYSkge1xuICAgIGNvbnN0IHsgdXNlcnNUYWJsZSwgYWNjb3VudHNUYWJsZSwgc2Vzc2lvbnNUYWJsZSwgdmVyaWZpY2F0aW9uVG9rZW5zVGFibGUsIGF1dGhlbnRpY2F0b3JzVGFibGUsIH0gPSBkZWZpbmVUYWJsZXMoc2NoZW1hKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhc3luYyBjcmVhdGVVc2VyKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWQsIC4uLmluc2VydERhdGEgfSA9IGRhdGE7XG4gICAgICAgICAgICBjb25zdCBoYXNEZWZhdWx0SWQgPSBnZXRUYWJsZUNvbHVtbnModXNlcnNUYWJsZSlbXCJpZFwiXVtcImRlZmF1bHRGblwiXTtcbiAgICAgICAgICAgIGNvbnN0IFtpbnNlcnRlZFVzZXJdID0gKGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgICAgIC5pbnNlcnQodXNlcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAudmFsdWVzKGhhc0RlZmF1bHRJZCA/IGluc2VydERhdGEgOiB7IC4uLmluc2VydERhdGEsIGlkIH0pXG4gICAgICAgICAgICAgICAgLiRyZXR1cm5pbmdJZCgpKTtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRcbiAgICAgICAgICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgICAgICAgICAuZnJvbSh1c2Vyc1RhYmxlKVxuICAgICAgICAgICAgICAgIC53aGVyZShlcSh1c2Vyc1RhYmxlLmlkLCBpbnNlcnRlZFVzZXIgPyBpbnNlcnRlZFVzZXIuaWQgOiBpZCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzWzBdKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0VXNlcih1c2VySWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRcbiAgICAgICAgICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgICAgICAgICAuZnJvbSh1c2Vyc1RhYmxlKVxuICAgICAgICAgICAgICAgIC53aGVyZShlcSh1c2Vyc1RhYmxlLmlkLCB1c2VySWQpKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5sZW5ndGggPiAwID8gcmVzWzBdIDogbnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGdldFVzZXJCeUVtYWlsKGVtYWlsKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20odXNlcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEodXNlcnNUYWJsZS5lbWFpbCwgZW1haWwpKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5sZW5ndGggPiAwID8gcmVzWzBdIDogbnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNyZWF0ZVNlc3Npb24oZGF0YSkge1xuICAgICAgICAgICAgYXdhaXQgY2xpZW50Lmluc2VydChzZXNzaW9uc1RhYmxlKS52YWx1ZXMoZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20oc2Vzc2lvbnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEoc2Vzc2lvbnNUYWJsZS5zZXNzaW9uVG9rZW4sIGRhdGEuc2Vzc2lvblRva2VuKSlcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXNbMF0pO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRTZXNzaW9uQW5kVXNlcihzZXNzaW9uVG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRcbiAgICAgICAgICAgICAgICAuc2VsZWN0KHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiBzZXNzaW9uc1RhYmxlLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJzVGFibGUsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5mcm9tKHNlc3Npb25zVGFibGUpXG4gICAgICAgICAgICAgICAgLndoZXJlKGVxKHNlc3Npb25zVGFibGUuc2Vzc2lvblRva2VuLCBzZXNzaW9uVG9rZW4pKVxuICAgICAgICAgICAgICAgIC5pbm5lckpvaW4odXNlcnNUYWJsZSwgZXEodXNlcnNUYWJsZS5pZCwgc2Vzc2lvbnNUYWJsZS51c2VySWQpKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IChyZXMubGVuZ3RoID4gMCA/IHJlc1swXSA6IG51bGwpKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgdXBkYXRlVXNlcihkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIWRhdGEuaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB1c2VyIGlkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgICAgIC51cGRhdGUodXNlcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAuc2V0KGRhdGEpXG4gICAgICAgICAgICAgICAgLndoZXJlKGVxKHVzZXJzVGFibGUuaWQsIGRhdGEuaWQpKTtcbiAgICAgICAgICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20odXNlcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEodXNlcnNUYWJsZS5pZCwgZGF0YS5pZCkpO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB1c2VyIGZvdW5kLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHVwZGF0ZVNlc3Npb24oZGF0YSkge1xuICAgICAgICAgICAgYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLnVwZGF0ZShzZXNzaW9uc1RhYmxlKVxuICAgICAgICAgICAgICAgIC5zZXQoZGF0YSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEoc2Vzc2lvbnNUYWJsZS5zZXNzaW9uVG9rZW4sIGRhdGEuc2Vzc2lvblRva2VuKSk7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20oc2Vzc2lvbnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEoc2Vzc2lvbnNUYWJsZS5zZXNzaW9uVG9rZW4sIGRhdGEuc2Vzc2lvblRva2VuKSlcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXNbMF0pO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBsaW5rQWNjb3VudChkYXRhKSB7XG4gICAgICAgICAgICBhd2FpdCBjbGllbnQuaW5zZXJ0KGFjY291bnRzVGFibGUpLnZhbHVlcyhkYXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0VXNlckJ5QWNjb3VudChhY2NvdW50KSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnRcbiAgICAgICAgICAgICAgICAuc2VsZWN0KHtcbiAgICAgICAgICAgICAgICBhY2NvdW50OiBhY2NvdW50c1RhYmxlLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJzVGFibGUsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5mcm9tKGFjY291bnRzVGFibGUpXG4gICAgICAgICAgICAgICAgLmlubmVySm9pbih1c2Vyc1RhYmxlLCBlcShhY2NvdW50c1RhYmxlLnVzZXJJZCwgdXNlcnNUYWJsZS5pZCkpXG4gICAgICAgICAgICAgICAgLndoZXJlKGFuZChlcShhY2NvdW50c1RhYmxlLnByb3ZpZGVyLCBhY2NvdW50LnByb3ZpZGVyKSwgZXEoYWNjb3VudHNUYWJsZS5wcm92aWRlckFjY291bnRJZCwgYWNjb3VudC5wcm92aWRlckFjY291bnRJZCkpKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlc1swXSk7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gcmVzdWx0Py51c2VyID8/IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZGVsZXRlU2Vzc2lvbihzZXNzaW9uVG9rZW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgICAgIC5kZWxldGUoc2Vzc2lvbnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEoc2Vzc2lvbnNUYWJsZS5zZXNzaW9uVG9rZW4sIHNlc3Npb25Ub2tlbikpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjcmVhdGVWZXJpZmljYXRpb25Ub2tlbihkYXRhKSB7XG4gICAgICAgICAgICBhd2FpdCBjbGllbnQuaW5zZXJ0KHZlcmlmaWNhdGlvblRva2Vuc1RhYmxlKS52YWx1ZXMoZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20odmVyaWZpY2F0aW9uVG9rZW5zVGFibGUpXG4gICAgICAgICAgICAgICAgLndoZXJlKGVxKHZlcmlmaWNhdGlvblRva2Vuc1RhYmxlLmlkZW50aWZpZXIsIGRhdGEuaWRlbnRpZmllcikpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzWzBdKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgdXNlVmVyaWZpY2F0aW9uVG9rZW4ocGFyYW1zKSB7XG4gICAgICAgICAgICBjb25zdCBkZWxldGVkVG9rZW4gPSBhd2FpdCBjbGllbnRcbiAgICAgICAgICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgICAgICAgICAuZnJvbSh2ZXJpZmljYXRpb25Ub2tlbnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoYW5kKGVxKHZlcmlmaWNhdGlvblRva2Vuc1RhYmxlLmlkZW50aWZpZXIsIHBhcmFtcy5pZGVudGlmaWVyKSwgZXEodmVyaWZpY2F0aW9uVG9rZW5zVGFibGUudG9rZW4sIHBhcmFtcy50b2tlbikpKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IChyZXMubGVuZ3RoID4gMCA/IHJlc1swXSA6IG51bGwpKTtcbiAgICAgICAgICAgIGlmIChkZWxldGVkVG9rZW4pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGllbnRcbiAgICAgICAgICAgICAgICAgICAgLmRlbGV0ZSh2ZXJpZmljYXRpb25Ub2tlbnNUYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKGFuZChlcSh2ZXJpZmljYXRpb25Ub2tlbnNUYWJsZS5pZGVudGlmaWVyLCBwYXJhbXMuaWRlbnRpZmllciksIGVxKHZlcmlmaWNhdGlvblRva2Vuc1RhYmxlLnRva2VuLCBwYXJhbXMudG9rZW4pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGVsZXRlZFRva2VuO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBkZWxldGVVc2VyKGlkKSB7XG4gICAgICAgICAgICBhd2FpdCBjbGllbnQuZGVsZXRlKHVzZXJzVGFibGUpLndoZXJlKGVxKHVzZXJzVGFibGUuaWQsIGlkKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHVubGlua0FjY291bnQocGFyYW1zKSB7XG4gICAgICAgICAgICBhd2FpdCBjbGllbnRcbiAgICAgICAgICAgICAgICAuZGVsZXRlKGFjY291bnRzVGFibGUpXG4gICAgICAgICAgICAgICAgLndoZXJlKGFuZChlcShhY2NvdW50c1RhYmxlLnByb3ZpZGVyLCBwYXJhbXMucHJvdmlkZXIpLCBlcShhY2NvdW50c1RhYmxlLnByb3ZpZGVyQWNjb3VudElkLCBwYXJhbXMucHJvdmlkZXJBY2NvdW50SWQpKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGdldEFjY291bnQocHJvdmlkZXJBY2NvdW50SWQsIHByb3ZpZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20oYWNjb3VudHNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoYW5kKGVxKGFjY291bnRzVGFibGUucHJvdmlkZXIsIHByb3ZpZGVyKSwgZXEoYWNjb3VudHNUYWJsZS5wcm92aWRlckFjY291bnRJZCwgcHJvdmlkZXJBY2NvdW50SWQpKSlcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXNbMF0gPz8gbnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNyZWF0ZUF1dGhlbnRpY2F0b3IoZGF0YSkge1xuICAgICAgICAgICAgYXdhaXQgY2xpZW50Lmluc2VydChhdXRoZW50aWNhdG9yc1RhYmxlKS52YWx1ZXMoZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gKGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAgICAgICAgIC5mcm9tKGF1dGhlbnRpY2F0b3JzVGFibGUpXG4gICAgICAgICAgICAgICAgLndoZXJlKGVxKGF1dGhlbnRpY2F0b3JzVGFibGUuY3JlZGVudGlhbElELCBkYXRhLmNyZWRlbnRpYWxJRCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzWzBdID8/IG51bGwpKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0QXV0aGVudGljYXRvcihjcmVkZW50aWFsSUQpIHtcbiAgICAgICAgICAgIHJldHVybiAoYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20oYXV0aGVudGljYXRvcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEoYXV0aGVudGljYXRvcnNUYWJsZS5jcmVkZW50aWFsSUQsIGNyZWRlbnRpYWxJRCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzWzBdID8/IG51bGwpKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgbGlzdEF1dGhlbnRpY2F0b3JzQnlVc2VySWQodXNlcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gKGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAgICAgICAgIC5mcm9tKGF1dGhlbnRpY2F0b3JzVGFibGUpXG4gICAgICAgICAgICAgICAgLndoZXJlKGVxKGF1dGhlbnRpY2F0b3JzVGFibGUudXNlcklkLCB1c2VySWQpKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcykpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyB1cGRhdGVBdXRoZW50aWNhdG9yQ291bnRlcihjcmVkZW50aWFsSUQsIG5ld0NvdW50ZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgICAgIC51cGRhdGUoYXV0aGVudGljYXRvcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAuc2V0KHsgY291bnRlcjogbmV3Q291bnRlciB9KVxuICAgICAgICAgICAgICAgIC53aGVyZShlcShhdXRoZW50aWNhdG9yc1RhYmxlLmNyZWRlbnRpYWxJRCwgY3JlZGVudGlhbElEKSk7XG4gICAgICAgICAgICBjb25zdCBhdXRoZW50aWNhdG9yID0gYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20oYXV0aGVudGljYXRvcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEoYXV0aGVudGljYXRvcnNUYWJsZS5jcmVkZW50aWFsSUQsIGNyZWRlbnRpYWxJRCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzWzBdKTtcbiAgICAgICAgICAgIGlmICghYXV0aGVudGljYXRvcilcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdXRoZW50aWNhdG9yIG5vdCBmb3VuZC5cIik7XG4gICAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRvcjtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/mysql.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/pg.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/pg.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PostgresDrizzleAdapter: () => (/* binding */ PostgresDrizzleAdapter),\n/* harmony export */   defineTables: () => (/* binding */ defineTables)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/utils.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/pg-core/table.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/pg-core/columns/text.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/pg-core/columns/timestamp.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/pg-core/columns/integer.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/pg-core/primary-keys.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/pg-core/columns/boolean.js\");\n\n\nfunction defineTables(schema = {}) {\n    const usersTable = schema.usersTable ??\n        ((0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"user\", {\n            id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"id\")\n                .primaryKey()\n                .$defaultFn(() => crypto.randomUUID()),\n            name: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"name\"),\n            email: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"email\").unique(),\n            emailVerified: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.timestamp)(\"emailVerified\", { mode: \"date\" }),\n            image: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"image\"),\n        }));\n    const accountsTable = schema.accountsTable ??\n        ((0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"account\", {\n            userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"userId\")\n                .notNull()\n                .references(() => usersTable.id, { onDelete: \"cascade\" }),\n            type: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"type\").$type().notNull(),\n            provider: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"provider\").notNull(),\n            providerAccountId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"providerAccountId\").notNull(),\n            refresh_token: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"refresh_token\"),\n            access_token: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"access_token\"),\n            expires_at: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.integer)(\"expires_at\"),\n            token_type: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"token_type\"),\n            scope: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"scope\"),\n            id_token: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"id_token\"),\n            session_state: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"session_state\"),\n        }, (account) => ({\n            compositePk: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.primaryKey)({\n                columns: [account.provider, account.providerAccountId],\n            }),\n        })));\n    const sessionsTable = schema.sessionsTable ??\n        ((0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"session\", {\n            sessionToken: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"sessionToken\").primaryKey(),\n            userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"userId\")\n                .notNull()\n                .references(() => usersTable.id, { onDelete: \"cascade\" }),\n            expires: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.timestamp)(\"expires\", { mode: \"date\" }).notNull(),\n        }));\n    const verificationTokensTable = schema.verificationTokensTable ??\n        ((0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"verificationToken\", {\n            identifier: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"identifier\").notNull(),\n            token: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"token\").notNull(),\n            expires: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.timestamp)(\"expires\", { mode: \"date\" }).notNull(),\n        }, (verificationToken) => ({\n            compositePk: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.primaryKey)({\n                columns: [verificationToken.identifier, verificationToken.token],\n            }),\n        })));\n    const authenticatorsTable = schema.authenticatorsTable ??\n        ((0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)(\"authenticator\", {\n            credentialID: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"credentialID\").notNull().unique(),\n            userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"userId\")\n                .notNull()\n                .references(() => usersTable.id, { onDelete: \"cascade\" }),\n            providerAccountId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"providerAccountId\").notNull(),\n            credentialPublicKey: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"credentialPublicKey\").notNull(),\n            counter: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.integer)(\"counter\").notNull(),\n            credentialDeviceType: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"credentialDeviceType\").notNull(),\n            credentialBackedUp: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.boolean)(\"credentialBackedUp\").notNull(),\n            transports: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"transports\"),\n        }, (authenticator) => ({\n            compositePK: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.primaryKey)({\n                columns: [authenticator.userId, authenticator.credentialID],\n            }),\n        })));\n    return {\n        usersTable,\n        accountsTable,\n        sessionsTable,\n        verificationTokensTable,\n        authenticatorsTable,\n    };\n}\nfunction PostgresDrizzleAdapter(client, schema) {\n    const { usersTable, accountsTable, sessionsTable, verificationTokensTable, authenticatorsTable, } = defineTables(schema);\n    return {\n        async createUser(data) {\n            const { id, ...insertData } = data;\n            const hasDefaultId = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.getTableColumns)(usersTable)[\"id\"][\"hasDefault\"];\n            return client\n                .insert(usersTable)\n                .values(hasDefaultId ? insertData : { ...insertData, id })\n                .returning()\n                .then((res) => res[0]);\n        },\n        async getUser(userId) {\n            return client\n                .select()\n                .from(usersTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.id, userId))\n                .then((res) => res.length > 0 ? res[0] : null);\n        },\n        async getUserByEmail(email) {\n            return client\n                .select()\n                .from(usersTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.email, email))\n                .then((res) => res.length > 0 ? res[0] : null);\n        },\n        async createSession(data) {\n            return client\n                .insert(sessionsTable)\n                .values(data)\n                .returning()\n                .then((res) => res[0]);\n        },\n        async getSessionAndUser(sessionToken) {\n            return client\n                .select({\n                session: sessionsTable,\n                user: usersTable,\n            })\n                .from(sessionsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(sessionsTable.sessionToken, sessionToken))\n                .innerJoin(usersTable, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.id, sessionsTable.userId))\n                .then((res) => (res.length > 0 ? res[0] : null));\n        },\n        async updateUser(data) {\n            if (!data.id) {\n                throw new Error(\"No user id.\");\n            }\n            const [result] = await client\n                .update(usersTable)\n                .set(data)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.id, data.id))\n                .returning();\n            if (!result) {\n                throw new Error(\"No user found.\");\n            }\n            return result;\n        },\n        async updateSession(data) {\n            return client\n                .update(sessionsTable)\n                .set(data)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(sessionsTable.sessionToken, data.sessionToken))\n                .returning()\n                .then((res) => res[0]);\n        },\n        async linkAccount(data) {\n            await client.insert(accountsTable).values(data);\n        },\n        async getUserByAccount(account) {\n            const result = await client\n                .select({\n                account: accountsTable,\n                user: usersTable,\n            })\n                .from(accountsTable)\n                .innerJoin(usersTable, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.userId, usersTable.id))\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.provider, account.provider), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.providerAccountId, account.providerAccountId)))\n                .then((res) => res[0]);\n            const user = result?.user ?? null;\n            return user;\n        },\n        async deleteSession(sessionToken) {\n            await client\n                .delete(sessionsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(sessionsTable.sessionToken, sessionToken));\n        },\n        async createVerificationToken(data) {\n            return client\n                .insert(verificationTokensTable)\n                .values(data)\n                .returning()\n                .then((res) => res[0]);\n        },\n        async useVerificationToken(params) {\n            return client\n                .delete(verificationTokensTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(verificationTokensTable.identifier, params.identifier), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(verificationTokensTable.token, params.token)))\n                .returning()\n                .then((res) => (res.length > 0 ? res[0] : null));\n        },\n        async deleteUser(id) {\n            await client.delete(usersTable).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(usersTable.id, id));\n        },\n        async unlinkAccount(params) {\n            await client\n                .delete(accountsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.provider, params.provider), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.providerAccountId, params.providerAccountId)));\n        },\n        async getAccount(providerAccountId, provider) {\n            return client\n                .select()\n                .from(accountsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.provider, provider), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(accountsTable.providerAccountId, providerAccountId)))\n                .then((res) => res[0] ?? null);\n        },\n        async createAuthenticator(data) {\n            return client\n                .insert(authenticatorsTable)\n                .values(data)\n                .returning()\n                .then((res) => res[0] ?? null);\n        },\n        async getAuthenticator(credentialID) {\n            return client\n                .select()\n                .from(authenticatorsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(authenticatorsTable.credentialID, credentialID))\n                .then((res) => res[0] ?? null);\n        },\n        async listAuthenticatorsByUserId(userId) {\n            return client\n                .select()\n                .from(authenticatorsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(authenticatorsTable.userId, userId))\n                .then((res) => res);\n        },\n        async updateAuthenticatorCounter(credentialID, newCounter) {\n            const authenticator = await client\n                .update(authenticatorsTable)\n                .set({ counter: newCounter })\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.eq)(authenticatorsTable.credentialID, credentialID))\n                .returning()\n                .then((res) => res[0]);\n            if (!authenticator)\n                throw new Error(\"Authenticator not found.\");\n            return authenticator;\n        },\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgrZHJpenpsZS1hZGFwdGVyQDEuMTEuMC9ub2RlX21vZHVsZXMvQGF1dGgvZHJpenpsZS1hZGFwdGVyL2xpYi9wZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXVEO0FBQ3VDO0FBQ3ZGLGlDQUFpQztBQUN4QztBQUNBLFNBQVMsNERBQU87QUFDaEIsZ0JBQWdCLHlEQUFJO0FBQ3BCO0FBQ0E7QUFDQSxrQkFBa0IseURBQUk7QUFDdEIsbUJBQW1CLHlEQUFJO0FBQ3ZCLDJCQUEyQiw4REFBUyxvQkFBb0IsY0FBYztBQUN0RSxtQkFBbUIseURBQUk7QUFDdkIsU0FBUztBQUNUO0FBQ0EsU0FBUyw0REFBTztBQUNoQixvQkFBb0IseURBQUk7QUFDeEI7QUFDQSxtREFBbUQscUJBQXFCO0FBQ3hFLGtCQUFrQix5REFBSTtBQUN0QixzQkFBc0IseURBQUk7QUFDMUIsK0JBQStCLHlEQUFJO0FBQ25DLDJCQUEyQix5REFBSTtBQUMvQiwwQkFBMEIseURBQUk7QUFDOUIsd0JBQXdCLDREQUFPO0FBQy9CLHdCQUF3Qix5REFBSTtBQUM1QixtQkFBbUIseURBQUk7QUFDdkIsc0JBQXNCLHlEQUFJO0FBQzFCLDJCQUEyQix5REFBSTtBQUMvQixTQUFTO0FBQ1QseUJBQXlCLCtEQUFVO0FBQ25DO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLFNBQVMsNERBQU87QUFDaEIsMEJBQTBCLHlEQUFJO0FBQzlCLG9CQUFvQix5REFBSTtBQUN4QjtBQUNBLG1EQUFtRCxxQkFBcUI7QUFDeEUscUJBQXFCLDhEQUFTLGNBQWMsY0FBYztBQUMxRCxTQUFTO0FBQ1Q7QUFDQSxTQUFTLDREQUFPO0FBQ2hCLHdCQUF3Qix5REFBSTtBQUM1QixtQkFBbUIseURBQUk7QUFDdkIscUJBQXFCLDhEQUFTLGNBQWMsY0FBYztBQUMxRCxTQUFTO0FBQ1QseUJBQXlCLCtEQUFVO0FBQ25DO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLFNBQVMsNERBQU87QUFDaEIsMEJBQTBCLHlEQUFJO0FBQzlCLG9CQUFvQix5REFBSTtBQUN4QjtBQUNBLG1EQUFtRCxxQkFBcUI7QUFDeEUsK0JBQStCLHlEQUFJO0FBQ25DLGlDQUFpQyx5REFBSTtBQUNyQyxxQkFBcUIsNERBQU87QUFDNUIsa0NBQWtDLHlEQUFJO0FBQ3RDLGdDQUFnQyw0REFBTztBQUN2Qyx3QkFBd0IseURBQUk7QUFDNUIsU0FBUztBQUNULHlCQUF5QiwrREFBVTtBQUNuQztBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSwwRkFBMEY7QUFDdEc7QUFDQTtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEMsaUNBQWlDLDREQUFlO0FBQ2hEO0FBQ0E7QUFDQSxzREFBc0QsbUJBQW1CO0FBQ3pFO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0NBQUU7QUFDekI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0NBQUU7QUFDekI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx1QkFBdUIsK0NBQUU7QUFDekIsdUNBQXVDLCtDQUFFO0FBQ3pDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFFO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0NBQUU7QUFDekI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx1Q0FBdUMsK0NBQUU7QUFDekMsdUJBQXVCLGdEQUFHLENBQUMsK0NBQUUsNENBQTRDLCtDQUFFO0FBQzNFO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0NBQUU7QUFDekIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0RBQUcsQ0FBQywrQ0FBRSx5REFBeUQsK0NBQUU7QUFDeEY7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGtEQUFrRCwrQ0FBRTtBQUNwRCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdEQUFHLENBQUMsK0NBQUUsMkNBQTJDLCtDQUFFO0FBQzFFLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixnREFBRyxDQUFDLCtDQUFFLG9DQUFvQywrQ0FBRTtBQUNuRTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0NBQUU7QUFDekI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0NBQUU7QUFDekI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHFCQUFxQjtBQUM1Qyx1QkFBdUIsK0NBQUU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVzdC1hcHBsaWNhdGlvbi8uL25vZGVfbW9kdWxlcy8ucG5wbS9AYXV0aCtkcml6emxlLWFkYXB0ZXJAMS4xMS4wL25vZGVfbW9kdWxlcy9AYXV0aC9kcml6emxlLWFkYXB0ZXIvbGliL3BnLmpzPzY0YTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYW5kLCBlcSwgZ2V0VGFibGVDb2x1bW5zIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5pbXBvcnQgeyBib29sZWFuLCBpbnRlZ2VyLCBwZ1RhYmxlLCBwcmltYXJ5S2V5LCB0ZXh0LCB0aW1lc3RhbXAsIH0gZnJvbSBcImRyaXp6bGUtb3JtL3BnLWNvcmVcIjtcbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVUYWJsZXMoc2NoZW1hID0ge30pIHtcbiAgICBjb25zdCB1c2Vyc1RhYmxlID0gc2NoZW1hLnVzZXJzVGFibGUgPz9cbiAgICAgICAgKHBnVGFibGUoXCJ1c2VyXCIsIHtcbiAgICAgICAgICAgIGlkOiB0ZXh0KFwiaWRcIilcbiAgICAgICAgICAgICAgICAucHJpbWFyeUtleSgpXG4gICAgICAgICAgICAgICAgLiRkZWZhdWx0Rm4oKCkgPT4gY3J5cHRvLnJhbmRvbVVVSUQoKSksXG4gICAgICAgICAgICBuYW1lOiB0ZXh0KFwibmFtZVwiKSxcbiAgICAgICAgICAgIGVtYWlsOiB0ZXh0KFwiZW1haWxcIikudW5pcXVlKCksXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB0aW1lc3RhbXAoXCJlbWFpbFZlcmlmaWVkXCIsIHsgbW9kZTogXCJkYXRlXCIgfSksXG4gICAgICAgICAgICBpbWFnZTogdGV4dChcImltYWdlXCIpLFxuICAgICAgICB9KSk7XG4gICAgY29uc3QgYWNjb3VudHNUYWJsZSA9IHNjaGVtYS5hY2NvdW50c1RhYmxlID8/XG4gICAgICAgIChwZ1RhYmxlKFwiYWNjb3VudFwiLCB7XG4gICAgICAgICAgICB1c2VySWQ6IHRleHQoXCJ1c2VySWRcIilcbiAgICAgICAgICAgICAgICAubm90TnVsbCgpXG4gICAgICAgICAgICAgICAgLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnNUYWJsZS5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gICAgICAgICAgICB0eXBlOiB0ZXh0KFwidHlwZVwiKS4kdHlwZSgpLm5vdE51bGwoKSxcbiAgICAgICAgICAgIHByb3ZpZGVyOiB0ZXh0KFwicHJvdmlkZXJcIikubm90TnVsbCgpLFxuICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IHRleHQoXCJwcm92aWRlckFjY291bnRJZFwiKS5ub3ROdWxsKCksXG4gICAgICAgICAgICByZWZyZXNoX3Rva2VuOiB0ZXh0KFwicmVmcmVzaF90b2tlblwiKSxcbiAgICAgICAgICAgIGFjY2Vzc190b2tlbjogdGV4dChcImFjY2Vzc190b2tlblwiKSxcbiAgICAgICAgICAgIGV4cGlyZXNfYXQ6IGludGVnZXIoXCJleHBpcmVzX2F0XCIpLFxuICAgICAgICAgICAgdG9rZW5fdHlwZTogdGV4dChcInRva2VuX3R5cGVcIiksXG4gICAgICAgICAgICBzY29wZTogdGV4dChcInNjb3BlXCIpLFxuICAgICAgICAgICAgaWRfdG9rZW46IHRleHQoXCJpZF90b2tlblwiKSxcbiAgICAgICAgICAgIHNlc3Npb25fc3RhdGU6IHRleHQoXCJzZXNzaW9uX3N0YXRlXCIpLFxuICAgICAgICB9LCAoYWNjb3VudCkgPT4gKHtcbiAgICAgICAgICAgIGNvbXBvc2l0ZVBrOiBwcmltYXJ5S2V5KHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiBbYWNjb3VudC5wcm92aWRlciwgYWNjb3VudC5wcm92aWRlckFjY291bnRJZF0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSkpKTtcbiAgICBjb25zdCBzZXNzaW9uc1RhYmxlID0gc2NoZW1hLnNlc3Npb25zVGFibGUgPz9cbiAgICAgICAgKHBnVGFibGUoXCJzZXNzaW9uXCIsIHtcbiAgICAgICAgICAgIHNlc3Npb25Ub2tlbjogdGV4dChcInNlc3Npb25Ub2tlblwiKS5wcmltYXJ5S2V5KCksXG4gICAgICAgICAgICB1c2VySWQ6IHRleHQoXCJ1c2VySWRcIilcbiAgICAgICAgICAgICAgICAubm90TnVsbCgpXG4gICAgICAgICAgICAgICAgLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnNUYWJsZS5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gICAgICAgICAgICBleHBpcmVzOiB0aW1lc3RhbXAoXCJleHBpcmVzXCIsIHsgbW9kZTogXCJkYXRlXCIgfSkubm90TnVsbCgpLFxuICAgICAgICB9KSk7XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uVG9rZW5zVGFibGUgPSBzY2hlbWEudmVyaWZpY2F0aW9uVG9rZW5zVGFibGUgPz9cbiAgICAgICAgKHBnVGFibGUoXCJ2ZXJpZmljYXRpb25Ub2tlblwiLCB7XG4gICAgICAgICAgICBpZGVudGlmaWVyOiB0ZXh0KFwiaWRlbnRpZmllclwiKS5ub3ROdWxsKCksXG4gICAgICAgICAgICB0b2tlbjogdGV4dChcInRva2VuXCIpLm5vdE51bGwoKSxcbiAgICAgICAgICAgIGV4cGlyZXM6IHRpbWVzdGFtcChcImV4cGlyZXNcIiwgeyBtb2RlOiBcImRhdGVcIiB9KS5ub3ROdWxsKCksXG4gICAgICAgIH0sICh2ZXJpZmljYXRpb25Ub2tlbikgPT4gKHtcbiAgICAgICAgICAgIGNvbXBvc2l0ZVBrOiBwcmltYXJ5S2V5KHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiBbdmVyaWZpY2F0aW9uVG9rZW4uaWRlbnRpZmllciwgdmVyaWZpY2F0aW9uVG9rZW4udG9rZW5dLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pKSk7XG4gICAgY29uc3QgYXV0aGVudGljYXRvcnNUYWJsZSA9IHNjaGVtYS5hdXRoZW50aWNhdG9yc1RhYmxlID8/XG4gICAgICAgIChwZ1RhYmxlKFwiYXV0aGVudGljYXRvclwiLCB7XG4gICAgICAgICAgICBjcmVkZW50aWFsSUQ6IHRleHQoXCJjcmVkZW50aWFsSURcIikubm90TnVsbCgpLnVuaXF1ZSgpLFxuICAgICAgICAgICAgdXNlcklkOiB0ZXh0KFwidXNlcklkXCIpXG4gICAgICAgICAgICAgICAgLm5vdE51bGwoKVxuICAgICAgICAgICAgICAgIC5yZWZlcmVuY2VzKCgpID0+IHVzZXJzVGFibGUuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IHRleHQoXCJwcm92aWRlckFjY291bnRJZFwiKS5ub3ROdWxsKCksXG4gICAgICAgICAgICBjcmVkZW50aWFsUHVibGljS2V5OiB0ZXh0KFwiY3JlZGVudGlhbFB1YmxpY0tleVwiKS5ub3ROdWxsKCksXG4gICAgICAgICAgICBjb3VudGVyOiBpbnRlZ2VyKFwiY291bnRlclwiKS5ub3ROdWxsKCksXG4gICAgICAgICAgICBjcmVkZW50aWFsRGV2aWNlVHlwZTogdGV4dChcImNyZWRlbnRpYWxEZXZpY2VUeXBlXCIpLm5vdE51bGwoKSxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxCYWNrZWRVcDogYm9vbGVhbihcImNyZWRlbnRpYWxCYWNrZWRVcFwiKS5ub3ROdWxsKCksXG4gICAgICAgICAgICB0cmFuc3BvcnRzOiB0ZXh0KFwidHJhbnNwb3J0c1wiKSxcbiAgICAgICAgfSwgKGF1dGhlbnRpY2F0b3IpID0+ICh7XG4gICAgICAgICAgICBjb21wb3NpdGVQSzogcHJpbWFyeUtleSh7XG4gICAgICAgICAgICAgICAgY29sdW1uczogW2F1dGhlbnRpY2F0b3IudXNlcklkLCBhdXRoZW50aWNhdG9yLmNyZWRlbnRpYWxJRF0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB1c2Vyc1RhYmxlLFxuICAgICAgICBhY2NvdW50c1RhYmxlLFxuICAgICAgICBzZXNzaW9uc1RhYmxlLFxuICAgICAgICB2ZXJpZmljYXRpb25Ub2tlbnNUYWJsZSxcbiAgICAgICAgYXV0aGVudGljYXRvcnNUYWJsZSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIFBvc3RncmVzRHJpenpsZUFkYXB0ZXIoY2xpZW50LCBzY2hlbWEpIHtcbiAgICBjb25zdCB7IHVzZXJzVGFibGUsIGFjY291bnRzVGFibGUsIHNlc3Npb25zVGFibGUsIHZlcmlmaWNhdGlvblRva2Vuc1RhYmxlLCBhdXRoZW50aWNhdG9yc1RhYmxlLCB9ID0gZGVmaW5lVGFibGVzKHNjaGVtYSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXN5bmMgY3JlYXRlVXNlcihkYXRhKSB7XG4gICAgICAgICAgICBjb25zdCB7IGlkLCAuLi5pbnNlcnREYXRhIH0gPSBkYXRhO1xuICAgICAgICAgICAgY29uc3QgaGFzRGVmYXVsdElkID0gZ2V0VGFibGVDb2x1bW5zKHVzZXJzVGFibGUpW1wiaWRcIl1bXCJoYXNEZWZhdWx0XCJdO1xuICAgICAgICAgICAgcmV0dXJuIGNsaWVudFxuICAgICAgICAgICAgICAgIC5pbnNlcnQodXNlcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAudmFsdWVzKGhhc0RlZmF1bHRJZCA/IGluc2VydERhdGEgOiB7IC4uLmluc2VydERhdGEsIGlkIH0pXG4gICAgICAgICAgICAgICAgLnJldHVybmluZygpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzWzBdKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0VXNlcih1c2VySWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRcbiAgICAgICAgICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgICAgICAgICAuZnJvbSh1c2Vyc1RhYmxlKVxuICAgICAgICAgICAgICAgIC53aGVyZShlcSh1c2Vyc1RhYmxlLmlkLCB1c2VySWQpKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5sZW5ndGggPiAwID8gcmVzWzBdIDogbnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGdldFVzZXJCeUVtYWlsKGVtYWlsKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20odXNlcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEodXNlcnNUYWJsZS5lbWFpbCwgZW1haWwpKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5sZW5ndGggPiAwID8gcmVzWzBdIDogbnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNyZWF0ZVNlc3Npb24oZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGNsaWVudFxuICAgICAgICAgICAgICAgIC5pbnNlcnQoc2Vzc2lvbnNUYWJsZSlcbiAgICAgICAgICAgICAgICAudmFsdWVzKGRhdGEpXG4gICAgICAgICAgICAgICAgLnJldHVybmluZygpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzWzBdKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0U2Vzc2lvbkFuZFVzZXIoc2Vzc2lvblRva2VuKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCh7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbjogc2Vzc2lvbnNUYWJsZSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2Vyc1RhYmxlLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZnJvbShzZXNzaW9uc1RhYmxlKVxuICAgICAgICAgICAgICAgIC53aGVyZShlcShzZXNzaW9uc1RhYmxlLnNlc3Npb25Ub2tlbiwgc2Vzc2lvblRva2VuKSlcbiAgICAgICAgICAgICAgICAuaW5uZXJKb2luKHVzZXJzVGFibGUsIGVxKHVzZXJzVGFibGUuaWQsIHNlc3Npb25zVGFibGUudXNlcklkKSlcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiAocmVzLmxlbmd0aCA+IDAgPyByZXNbMF0gOiBudWxsKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHVwZGF0ZVVzZXIoZGF0YSkge1xuICAgICAgICAgICAgaWYgKCFkYXRhLmlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdXNlciBpZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgICAgIC51cGRhdGUodXNlcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAuc2V0KGRhdGEpXG4gICAgICAgICAgICAgICAgLndoZXJlKGVxKHVzZXJzVGFibGUuaWQsIGRhdGEuaWQpKVxuICAgICAgICAgICAgICAgIC5yZXR1cm5pbmcoKTtcbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdXNlciBmb3VuZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyB1cGRhdGVTZXNzaW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRcbiAgICAgICAgICAgICAgICAudXBkYXRlKHNlc3Npb25zVGFibGUpXG4gICAgICAgICAgICAgICAgLnNldChkYXRhKVxuICAgICAgICAgICAgICAgIC53aGVyZShlcShzZXNzaW9uc1RhYmxlLnNlc3Npb25Ub2tlbiwgZGF0YS5zZXNzaW9uVG9rZW4pKVxuICAgICAgICAgICAgICAgIC5yZXR1cm5pbmcoKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlc1swXSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGxpbmtBY2NvdW50KGRhdGEpIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudC5pbnNlcnQoYWNjb3VudHNUYWJsZSkudmFsdWVzKGRhdGEpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRVc2VyQnlBY2NvdW50KGFjY291bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgICAgIC5zZWxlY3Qoe1xuICAgICAgICAgICAgICAgIGFjY291bnQ6IGFjY291bnRzVGFibGUsXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlcnNUYWJsZSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZyb20oYWNjb3VudHNUYWJsZSlcbiAgICAgICAgICAgICAgICAuaW5uZXJKb2luKHVzZXJzVGFibGUsIGVxKGFjY291bnRzVGFibGUudXNlcklkLCB1c2Vyc1RhYmxlLmlkKSlcbiAgICAgICAgICAgICAgICAud2hlcmUoYW5kKGVxKGFjY291bnRzVGFibGUucHJvdmlkZXIsIGFjY291bnQucHJvdmlkZXIpLCBlcShhY2NvdW50c1RhYmxlLnByb3ZpZGVyQWNjb3VudElkLCBhY2NvdW50LnByb3ZpZGVyQWNjb3VudElkKSkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzWzBdKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSByZXN1bHQ/LnVzZXIgPz8gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBkZWxldGVTZXNzaW9uKHNlc3Npb25Ub2tlbikge1xuICAgICAgICAgICAgYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLmRlbGV0ZShzZXNzaW9uc1RhYmxlKVxuICAgICAgICAgICAgICAgIC53aGVyZShlcShzZXNzaW9uc1RhYmxlLnNlc3Npb25Ub2tlbiwgc2Vzc2lvblRva2VuKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNyZWF0ZVZlcmlmaWNhdGlvblRva2VuKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRcbiAgICAgICAgICAgICAgICAuaW5zZXJ0KHZlcmlmaWNhdGlvblRva2Vuc1RhYmxlKVxuICAgICAgICAgICAgICAgIC52YWx1ZXMoZGF0YSlcbiAgICAgICAgICAgICAgICAucmV0dXJuaW5nKClcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXNbMF0pO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyB1c2VWZXJpZmljYXRpb25Ub2tlbihwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRcbiAgICAgICAgICAgICAgICAuZGVsZXRlKHZlcmlmaWNhdGlvblRva2Vuc1RhYmxlKVxuICAgICAgICAgICAgICAgIC53aGVyZShhbmQoZXEodmVyaWZpY2F0aW9uVG9rZW5zVGFibGUuaWRlbnRpZmllciwgcGFyYW1zLmlkZW50aWZpZXIpLCBlcSh2ZXJpZmljYXRpb25Ub2tlbnNUYWJsZS50b2tlbiwgcGFyYW1zLnRva2VuKSkpXG4gICAgICAgICAgICAgICAgLnJldHVybmluZygpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gKHJlcy5sZW5ndGggPiAwID8gcmVzWzBdIDogbnVsbCkpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBkZWxldGVVc2VyKGlkKSB7XG4gICAgICAgICAgICBhd2FpdCBjbGllbnQuZGVsZXRlKHVzZXJzVGFibGUpLndoZXJlKGVxKHVzZXJzVGFibGUuaWQsIGlkKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHVubGlua0FjY291bnQocGFyYW1zKSB7XG4gICAgICAgICAgICBhd2FpdCBjbGllbnRcbiAgICAgICAgICAgICAgICAuZGVsZXRlKGFjY291bnRzVGFibGUpXG4gICAgICAgICAgICAgICAgLndoZXJlKGFuZChlcShhY2NvdW50c1RhYmxlLnByb3ZpZGVyLCBwYXJhbXMucHJvdmlkZXIpLCBlcShhY2NvdW50c1RhYmxlLnByb3ZpZGVyQWNjb3VudElkLCBwYXJhbXMucHJvdmlkZXJBY2NvdW50SWQpKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGdldEFjY291bnQocHJvdmlkZXJBY2NvdW50SWQsIHByb3ZpZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20oYWNjb3VudHNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoYW5kKGVxKGFjY291bnRzVGFibGUucHJvdmlkZXIsIHByb3ZpZGVyKSwgZXEoYWNjb3VudHNUYWJsZS5wcm92aWRlckFjY291bnRJZCwgcHJvdmlkZXJBY2NvdW50SWQpKSlcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXNbMF0gPz8gbnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNyZWF0ZUF1dGhlbnRpY2F0b3IoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGNsaWVudFxuICAgICAgICAgICAgICAgIC5pbnNlcnQoYXV0aGVudGljYXRvcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAudmFsdWVzKGRhdGEpXG4gICAgICAgICAgICAgICAgLnJldHVybmluZygpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzWzBdID8/IG51bGwpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRBdXRoZW50aWNhdG9yKGNyZWRlbnRpYWxJRCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsaWVudFxuICAgICAgICAgICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAgICAgICAgIC5mcm9tKGF1dGhlbnRpY2F0b3JzVGFibGUpXG4gICAgICAgICAgICAgICAgLndoZXJlKGVxKGF1dGhlbnRpY2F0b3JzVGFibGUuY3JlZGVudGlhbElELCBjcmVkZW50aWFsSUQpKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlc1swXSA/PyBudWxsKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgbGlzdEF1dGhlbnRpY2F0b3JzQnlVc2VySWQodXNlcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20oYXV0aGVudGljYXRvcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEoYXV0aGVudGljYXRvcnNUYWJsZS51c2VySWQsIHVzZXJJZCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgdXBkYXRlQXV0aGVudGljYXRvckNvdW50ZXIoY3JlZGVudGlhbElELCBuZXdDb3VudGVyKSB7XG4gICAgICAgICAgICBjb25zdCBhdXRoZW50aWNhdG9yID0gYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLnVwZGF0ZShhdXRoZW50aWNhdG9yc1RhYmxlKVxuICAgICAgICAgICAgICAgIC5zZXQoeyBjb3VudGVyOiBuZXdDb3VudGVyIH0pXG4gICAgICAgICAgICAgICAgLndoZXJlKGVxKGF1dGhlbnRpY2F0b3JzVGFibGUuY3JlZGVudGlhbElELCBjcmVkZW50aWFsSUQpKVxuICAgICAgICAgICAgICAgIC5yZXR1cm5pbmcoKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlc1swXSk7XG4gICAgICAgICAgICBpZiAoIWF1dGhlbnRpY2F0b3IpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXV0aGVudGljYXRvciBub3QgZm91bmQuXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0b3I7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/pg.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/sqlite.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/sqlite.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SQLiteDrizzleAdapter: () => (/* binding */ SQLiteDrizzleAdapter),\n/* harmony export */   defineTables: () => (/* binding */ defineTables)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/utils.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm/sqlite-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/sqlite-core/table.js\");\n/* harmony import */ var drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/sqlite-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/sqlite-core/columns/text.js\");\n/* harmony import */ var drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/sqlite-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/sqlite-core/columns/integer.js\");\n/* harmony import */ var drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm/sqlite-core */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.31.4_@opentelemetry+api@1.9.0_@types+react@18.3.26_pg@8.16.3_postgres@3.4.7_react@18.3.1/node_modules/drizzle-orm/sqlite-core/primary-keys.js\");\n\n\nfunction defineTables(schema = {}) {\n    const usersTable = schema.usersTable ??\n        ((0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_0__.sqliteTable)(\"user\", {\n            id: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"id\")\n                .primaryKey()\n                .$defaultFn(() => crypto.randomUUID()),\n            name: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"name\"),\n            email: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"email\").unique(),\n            emailVerified: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_2__.integer)(\"emailVerified\", { mode: \"timestamp_ms\" }),\n            image: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"image\"),\n        }));\n    const accountsTable = schema.accountsTable ??\n        ((0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_0__.sqliteTable)(\"account\", {\n            userId: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"userId\")\n                .notNull()\n                .references(() => usersTable.id, { onDelete: \"cascade\" }),\n            type: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"type\").$type().notNull(),\n            provider: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"provider\").notNull(),\n            providerAccountId: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"providerAccountId\").notNull(),\n            refresh_token: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"refresh_token\"),\n            access_token: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"access_token\"),\n            expires_at: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_2__.integer)(\"expires_at\"),\n            token_type: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"token_type\"),\n            scope: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"scope\"),\n            id_token: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"id_token\"),\n            session_state: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"session_state\"),\n        }, (account) => ({\n            compositePk: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_3__.primaryKey)({\n                columns: [account.provider, account.providerAccountId],\n            }),\n        })));\n    const sessionsTable = schema.sessionsTable ??\n        ((0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_0__.sqliteTable)(\"session\", {\n            sessionToken: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"sessionToken\").primaryKey(),\n            userId: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"userId\")\n                .notNull()\n                .references(() => usersTable.id, { onDelete: \"cascade\" }),\n            expires: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_2__.integer)(\"expires\", { mode: \"timestamp_ms\" }).notNull(),\n        }));\n    const verificationTokensTable = schema.verificationTokensTable ??\n        ((0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_0__.sqliteTable)(\"verificationToken\", {\n            identifier: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"identifier\").notNull(),\n            token: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"token\").notNull(),\n            expires: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_2__.integer)(\"expires\", { mode: \"timestamp_ms\" }).notNull(),\n        }, (verficationToken) => ({\n            compositePk: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_3__.primaryKey)({\n                columns: [verficationToken.identifier, verficationToken.token],\n            }),\n        })));\n    const authenticatorsTable = schema.authenticatorsTable ??\n        ((0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_0__.sqliteTable)(\"authenticator\", {\n            credentialID: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"credentialID\").notNull().unique(),\n            userId: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"userId\")\n                .notNull()\n                .references(() => usersTable.id, { onDelete: \"cascade\" }),\n            providerAccountId: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"providerAccountId\").notNull(),\n            credentialPublicKey: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"credentialPublicKey\").notNull(),\n            counter: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_2__.integer)(\"counter\").notNull(),\n            credentialDeviceType: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"credentialDeviceType\").notNull(),\n            credentialBackedUp: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_2__.integer)(\"credentialBackedUp\", {\n                mode: \"boolean\",\n            }).notNull(),\n            transports: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_1__.text)(\"transports\"),\n        }, (authenticator) => ({\n            compositePK: (0,drizzle_orm_sqlite_core__WEBPACK_IMPORTED_MODULE_3__.primaryKey)({\n                columns: [authenticator.userId, authenticator.credentialID],\n            }),\n        })));\n    return {\n        usersTable,\n        accountsTable,\n        sessionsTable,\n        verificationTokensTable,\n        authenticatorsTable,\n    };\n}\nfunction SQLiteDrizzleAdapter(client, schema) {\n    const { usersTable, accountsTable, sessionsTable, verificationTokensTable, authenticatorsTable, } = defineTables(schema);\n    return {\n        async createUser(data) {\n            const { id, ...insertData } = data;\n            const hasDefaultId = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.getTableColumns)(usersTable)[\"id\"][\"hasDefault\"];\n            return client\n                .insert(usersTable)\n                .values(hasDefaultId ? insertData : { ...insertData, id })\n                .returning()\n                .get();\n        },\n        async getUser(userId) {\n            const result = (await client\n                .select()\n                .from(usersTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(usersTable.id, userId))\n                .get()) ?? null;\n            return result;\n        },\n        async getUserByEmail(email) {\n            const result = (await client\n                .select()\n                .from(usersTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(usersTable.email, email))\n                .get()) ?? null;\n            return result;\n        },\n        async createSession(data) {\n            return client.insert(sessionsTable).values(data).returning().get();\n        },\n        async getSessionAndUser(sessionToken) {\n            const result = (await client\n                .select({\n                session: sessionsTable,\n                user: usersTable,\n            })\n                .from(sessionsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(sessionsTable.sessionToken, sessionToken))\n                .innerJoin(usersTable, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(usersTable.id, sessionsTable.userId))\n                .get()) ?? null;\n            return result;\n        },\n        async updateUser(data) {\n            if (!data.id) {\n                throw new Error(\"No user id.\");\n            }\n            const result = await client\n                .update(usersTable)\n                .set(data)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(usersTable.id, data.id))\n                .returning()\n                .get();\n            if (!result) {\n                throw new Error(\"User not found.\");\n            }\n            return result;\n        },\n        async updateSession(data) {\n            const result = await client\n                .update(sessionsTable)\n                .set(data)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(sessionsTable.sessionToken, data.sessionToken))\n                .returning()\n                .get();\n            return result ?? null;\n        },\n        async linkAccount(data) {\n            await client.insert(accountsTable).values(data).run();\n        },\n        async getUserByAccount(account) {\n            const result = await client\n                .select({\n                account: accountsTable,\n                user: usersTable,\n            })\n                .from(accountsTable)\n                .innerJoin(usersTable, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(accountsTable.userId, usersTable.id))\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(accountsTable.provider, account.provider), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(accountsTable.providerAccountId, account.providerAccountId)))\n                .get();\n            const user = result?.user ?? null;\n            return user;\n        },\n        async deleteSession(sessionToken) {\n            await client\n                .delete(sessionsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(sessionsTable.sessionToken, sessionToken))\n                .run();\n        },\n        async createVerificationToken(data) {\n            return client\n                .insert(verificationTokensTable)\n                .values(data)\n                .returning()\n                .get();\n        },\n        async useVerificationToken(params) {\n            const result = await client\n                .delete(verificationTokensTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(verificationTokensTable.identifier, params.identifier), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(verificationTokensTable.token, params.token)))\n                .returning()\n                .get();\n            return result ?? null;\n        },\n        async deleteUser(id) {\n            await client.delete(usersTable).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(usersTable.id, id)).run();\n        },\n        async unlinkAccount(params) {\n            await client\n                .delete(accountsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(accountsTable.provider, params.provider), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(accountsTable.providerAccountId, params.providerAccountId)))\n                .run();\n        },\n        async getAccount(providerAccountId, provider) {\n            return client\n                .select()\n                .from(accountsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.and)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(accountsTable.provider, provider), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(accountsTable.providerAccountId, providerAccountId)))\n                .then((res) => res[0] ?? null);\n        },\n        async createAuthenticator(data) {\n            return client\n                .insert(authenticatorsTable)\n                .values(data)\n                .returning()\n                .then((res) => res[0] ?? null);\n        },\n        async getAuthenticator(credentialID) {\n            return client\n                .select()\n                .from(authenticatorsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(authenticatorsTable.credentialID, credentialID))\n                .then((res) => res[0] ?? null);\n        },\n        async listAuthenticatorsByUserId(userId) {\n            return client\n                .select()\n                .from(authenticatorsTable)\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(authenticatorsTable.userId, userId))\n                .then((res) => res);\n        },\n        async updateAuthenticatorCounter(credentialID, newCounter) {\n            const authenticator = await client\n                .update(authenticatorsTable)\n                .set({ counter: newCounter })\n                .where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(authenticatorsTable.credentialID, credentialID))\n                .returning()\n                .then((res) => res[0]);\n            if (!authenticator)\n                throw new Error(\"Authenticator not found.\");\n            return authenticator;\n        },\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgrZHJpenpsZS1hZGFwdGVyQDEuMTEuMC9ub2RlX21vZHVsZXMvQGF1dGgvZHJpenpsZS1hZGFwdGVyL2xpYi9zcWxpdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDMkI7QUFDM0UsaUNBQWlDO0FBQ3hDO0FBQ0EsU0FBUyxvRUFBVztBQUNwQixnQkFBZ0IsNkRBQUk7QUFDcEI7QUFDQTtBQUNBLGtCQUFrQiw2REFBSTtBQUN0QixtQkFBbUIsNkRBQUk7QUFDdkIsMkJBQTJCLGdFQUFPLG9CQUFvQixzQkFBc0I7QUFDNUUsbUJBQW1CLDZEQUFJO0FBQ3ZCLFNBQVM7QUFDVDtBQUNBLFNBQVMsb0VBQVc7QUFDcEIsb0JBQW9CLDZEQUFJO0FBQ3hCO0FBQ0EsbURBQW1ELHFCQUFxQjtBQUN4RSxrQkFBa0IsNkRBQUk7QUFDdEIsc0JBQXNCLDZEQUFJO0FBQzFCLCtCQUErQiw2REFBSTtBQUNuQywyQkFBMkIsNkRBQUk7QUFDL0IsMEJBQTBCLDZEQUFJO0FBQzlCLHdCQUF3QixnRUFBTztBQUMvQix3QkFBd0IsNkRBQUk7QUFDNUIsbUJBQW1CLDZEQUFJO0FBQ3ZCLHNCQUFzQiw2REFBSTtBQUMxQiwyQkFBMkIsNkRBQUk7QUFDL0IsU0FBUztBQUNULHlCQUF5QixtRUFBVTtBQUNuQztBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQSxTQUFTLG9FQUFXO0FBQ3BCLDBCQUEwQiw2REFBSTtBQUM5QixvQkFBb0IsNkRBQUk7QUFDeEI7QUFDQSxtREFBbUQscUJBQXFCO0FBQ3hFLHFCQUFxQixnRUFBTyxjQUFjLHNCQUFzQjtBQUNoRSxTQUFTO0FBQ1Q7QUFDQSxTQUFTLG9FQUFXO0FBQ3BCLHdCQUF3Qiw2REFBSTtBQUM1QixtQkFBbUIsNkRBQUk7QUFDdkIscUJBQXFCLGdFQUFPLGNBQWMsc0JBQXNCO0FBQ2hFLFNBQVM7QUFDVCx5QkFBeUIsbUVBQVU7QUFDbkM7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0EsU0FBUyxvRUFBVztBQUNwQiwwQkFBMEIsNkRBQUk7QUFDOUIsb0JBQW9CLDZEQUFJO0FBQ3hCO0FBQ0EsbURBQW1ELHFCQUFxQjtBQUN4RSwrQkFBK0IsNkRBQUk7QUFDbkMsaUNBQWlDLDZEQUFJO0FBQ3JDLHFCQUFxQixnRUFBTztBQUM1QixrQ0FBa0MsNkRBQUk7QUFDdEMsZ0NBQWdDLGdFQUFPO0FBQ3ZDO0FBQ0EsYUFBYTtBQUNiLHdCQUF3Qiw2REFBSTtBQUM1QixTQUFTO0FBQ1QseUJBQXlCLG1FQUFVO0FBQ25DO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxZQUFZLDBGQUEwRjtBQUN0RztBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QyxpQ0FBaUMsNERBQWU7QUFDaEQ7QUFDQTtBQUNBLHNEQUFzRCxtQkFBbUI7QUFDekU7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBRTtBQUN6QjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFFO0FBQ3pCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsdUJBQXVCLCtDQUFFO0FBQ3pCLHVDQUF1QywrQ0FBRTtBQUN6QztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFFO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBRTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsdUNBQXVDLCtDQUFFO0FBQ3pDLHVCQUF1QixnREFBRyxDQUFDLCtDQUFFLDRDQUE0QywrQ0FBRTtBQUMzRTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFFO0FBQ3pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0RBQUcsQ0FBQywrQ0FBRSx5REFBeUQsK0NBQUU7QUFDeEY7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esa0RBQWtELCtDQUFFO0FBQ3BELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0RBQUcsQ0FBQywrQ0FBRSwyQ0FBMkMsK0NBQUU7QUFDMUU7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0RBQUcsQ0FBQywrQ0FBRSxvQ0FBb0MsK0NBQUU7QUFDbkU7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFFO0FBQ3pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFFO0FBQ3pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixxQkFBcUI7QUFDNUMsdUJBQXVCLCtDQUFFO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Rlc3QtYXBwbGljYXRpb24vLi9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgrZHJpenpsZS1hZGFwdGVyQDEuMTEuMC9ub2RlX21vZHVsZXMvQGF1dGgvZHJpenpsZS1hZGFwdGVyL2xpYi9zcWxpdGUuanM/Y2MzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhbmQsIGVxLCBnZXRUYWJsZUNvbHVtbnMgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcbmltcG9ydCB7IGludGVnZXIsIHByaW1hcnlLZXksIHNxbGl0ZVRhYmxlLCB0ZXh0LCB9IGZyb20gXCJkcml6emxlLW9ybS9zcWxpdGUtY29yZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVRhYmxlcyhzY2hlbWEgPSB7fSkge1xuICAgIGNvbnN0IHVzZXJzVGFibGUgPSBzY2hlbWEudXNlcnNUYWJsZSA/P1xuICAgICAgICAoc3FsaXRlVGFibGUoXCJ1c2VyXCIsIHtcbiAgICAgICAgICAgIGlkOiB0ZXh0KFwiaWRcIilcbiAgICAgICAgICAgICAgICAucHJpbWFyeUtleSgpXG4gICAgICAgICAgICAgICAgLiRkZWZhdWx0Rm4oKCkgPT4gY3J5cHRvLnJhbmRvbVVVSUQoKSksXG4gICAgICAgICAgICBuYW1lOiB0ZXh0KFwibmFtZVwiKSxcbiAgICAgICAgICAgIGVtYWlsOiB0ZXh0KFwiZW1haWxcIikudW5pcXVlKCksXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBpbnRlZ2VyKFwiZW1haWxWZXJpZmllZFwiLCB7IG1vZGU6IFwidGltZXN0YW1wX21zXCIgfSksXG4gICAgICAgICAgICBpbWFnZTogdGV4dChcImltYWdlXCIpLFxuICAgICAgICB9KSk7XG4gICAgY29uc3QgYWNjb3VudHNUYWJsZSA9IHNjaGVtYS5hY2NvdW50c1RhYmxlID8/XG4gICAgICAgIChzcWxpdGVUYWJsZShcImFjY291bnRcIiwge1xuICAgICAgICAgICAgdXNlcklkOiB0ZXh0KFwidXNlcklkXCIpXG4gICAgICAgICAgICAgICAgLm5vdE51bGwoKVxuICAgICAgICAgICAgICAgIC5yZWZlcmVuY2VzKCgpID0+IHVzZXJzVGFibGUuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICAgICAgICAgICAgdHlwZTogdGV4dChcInR5cGVcIikuJHR5cGUoKS5ub3ROdWxsKCksXG4gICAgICAgICAgICBwcm92aWRlcjogdGV4dChcInByb3ZpZGVyXCIpLm5vdE51bGwoKSxcbiAgICAgICAgICAgIHByb3ZpZGVyQWNjb3VudElkOiB0ZXh0KFwicHJvdmlkZXJBY2NvdW50SWRcIikubm90TnVsbCgpLFxuICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogdGV4dChcInJlZnJlc2hfdG9rZW5cIiksXG4gICAgICAgICAgICBhY2Nlc3NfdG9rZW46IHRleHQoXCJhY2Nlc3NfdG9rZW5cIiksXG4gICAgICAgICAgICBleHBpcmVzX2F0OiBpbnRlZ2VyKFwiZXhwaXJlc19hdFwiKSxcbiAgICAgICAgICAgIHRva2VuX3R5cGU6IHRleHQoXCJ0b2tlbl90eXBlXCIpLFxuICAgICAgICAgICAgc2NvcGU6IHRleHQoXCJzY29wZVwiKSxcbiAgICAgICAgICAgIGlkX3Rva2VuOiB0ZXh0KFwiaWRfdG9rZW5cIiksXG4gICAgICAgICAgICBzZXNzaW9uX3N0YXRlOiB0ZXh0KFwic2Vzc2lvbl9zdGF0ZVwiKSxcbiAgICAgICAgfSwgKGFjY291bnQpID0+ICh7XG4gICAgICAgICAgICBjb21wb3NpdGVQazogcHJpbWFyeUtleSh7XG4gICAgICAgICAgICAgICAgY29sdW1uczogW2FjY291bnQucHJvdmlkZXIsIGFjY291bnQucHJvdmlkZXJBY2NvdW50SWRdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pKSk7XG4gICAgY29uc3Qgc2Vzc2lvbnNUYWJsZSA9IHNjaGVtYS5zZXNzaW9uc1RhYmxlID8/XG4gICAgICAgIChzcWxpdGVUYWJsZShcInNlc3Npb25cIiwge1xuICAgICAgICAgICAgc2Vzc2lvblRva2VuOiB0ZXh0KFwic2Vzc2lvblRva2VuXCIpLnByaW1hcnlLZXkoKSxcbiAgICAgICAgICAgIHVzZXJJZDogdGV4dChcInVzZXJJZFwiKVxuICAgICAgICAgICAgICAgIC5ub3ROdWxsKClcbiAgICAgICAgICAgICAgICAucmVmZXJlbmNlcygoKSA9PiB1c2Vyc1RhYmxlLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgICAgICAgIGV4cGlyZXM6IGludGVnZXIoXCJleHBpcmVzXCIsIHsgbW9kZTogXCJ0aW1lc3RhbXBfbXNcIiB9KS5ub3ROdWxsKCksXG4gICAgICAgIH0pKTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25Ub2tlbnNUYWJsZSA9IHNjaGVtYS52ZXJpZmljYXRpb25Ub2tlbnNUYWJsZSA/P1xuICAgICAgICAoc3FsaXRlVGFibGUoXCJ2ZXJpZmljYXRpb25Ub2tlblwiLCB7XG4gICAgICAgICAgICBpZGVudGlmaWVyOiB0ZXh0KFwiaWRlbnRpZmllclwiKS5ub3ROdWxsKCksXG4gICAgICAgICAgICB0b2tlbjogdGV4dChcInRva2VuXCIpLm5vdE51bGwoKSxcbiAgICAgICAgICAgIGV4cGlyZXM6IGludGVnZXIoXCJleHBpcmVzXCIsIHsgbW9kZTogXCJ0aW1lc3RhbXBfbXNcIiB9KS5ub3ROdWxsKCksXG4gICAgICAgIH0sICh2ZXJmaWNhdGlvblRva2VuKSA9PiAoe1xuICAgICAgICAgICAgY29tcG9zaXRlUGs6IHByaW1hcnlLZXkoe1xuICAgICAgICAgICAgICAgIGNvbHVtbnM6IFt2ZXJmaWNhdGlvblRva2VuLmlkZW50aWZpZXIsIHZlcmZpY2F0aW9uVG9rZW4udG9rZW5dLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pKSk7XG4gICAgY29uc3QgYXV0aGVudGljYXRvcnNUYWJsZSA9IHNjaGVtYS5hdXRoZW50aWNhdG9yc1RhYmxlID8/XG4gICAgICAgIChzcWxpdGVUYWJsZShcImF1dGhlbnRpY2F0b3JcIiwge1xuICAgICAgICAgICAgY3JlZGVudGlhbElEOiB0ZXh0KFwiY3JlZGVudGlhbElEXCIpLm5vdE51bGwoKS51bmlxdWUoKSxcbiAgICAgICAgICAgIHVzZXJJZDogdGV4dChcInVzZXJJZFwiKVxuICAgICAgICAgICAgICAgIC5ub3ROdWxsKClcbiAgICAgICAgICAgICAgICAucmVmZXJlbmNlcygoKSA9PiB1c2Vyc1RhYmxlLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgICAgICAgIHByb3ZpZGVyQWNjb3VudElkOiB0ZXh0KFwicHJvdmlkZXJBY2NvdW50SWRcIikubm90TnVsbCgpLFxuICAgICAgICAgICAgY3JlZGVudGlhbFB1YmxpY0tleTogdGV4dChcImNyZWRlbnRpYWxQdWJsaWNLZXlcIikubm90TnVsbCgpLFxuICAgICAgICAgICAgY291bnRlcjogaW50ZWdlcihcImNvdW50ZXJcIikubm90TnVsbCgpLFxuICAgICAgICAgICAgY3JlZGVudGlhbERldmljZVR5cGU6IHRleHQoXCJjcmVkZW50aWFsRGV2aWNlVHlwZVwiKS5ub3ROdWxsKCksXG4gICAgICAgICAgICBjcmVkZW50aWFsQmFja2VkVXA6IGludGVnZXIoXCJjcmVkZW50aWFsQmFja2VkVXBcIiwge1xuICAgICAgICAgICAgICAgIG1vZGU6IFwiYm9vbGVhblwiLFxuICAgICAgICAgICAgfSkubm90TnVsbCgpLFxuICAgICAgICAgICAgdHJhbnNwb3J0czogdGV4dChcInRyYW5zcG9ydHNcIiksXG4gICAgICAgIH0sIChhdXRoZW50aWNhdG9yKSA9PiAoe1xuICAgICAgICAgICAgY29tcG9zaXRlUEs6IHByaW1hcnlLZXkoe1xuICAgICAgICAgICAgICAgIGNvbHVtbnM6IFthdXRoZW50aWNhdG9yLnVzZXJJZCwgYXV0aGVudGljYXRvci5jcmVkZW50aWFsSURdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcnNUYWJsZSxcbiAgICAgICAgYWNjb3VudHNUYWJsZSxcbiAgICAgICAgc2Vzc2lvbnNUYWJsZSxcbiAgICAgICAgdmVyaWZpY2F0aW9uVG9rZW5zVGFibGUsXG4gICAgICAgIGF1dGhlbnRpY2F0b3JzVGFibGUsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBTUUxpdGVEcml6emxlQWRhcHRlcihjbGllbnQsIHNjaGVtYSkge1xuICAgIGNvbnN0IHsgdXNlcnNUYWJsZSwgYWNjb3VudHNUYWJsZSwgc2Vzc2lvbnNUYWJsZSwgdmVyaWZpY2F0aW9uVG9rZW5zVGFibGUsIGF1dGhlbnRpY2F0b3JzVGFibGUsIH0gPSBkZWZpbmVUYWJsZXMoc2NoZW1hKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhc3luYyBjcmVhdGVVc2VyKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWQsIC4uLmluc2VydERhdGEgfSA9IGRhdGE7XG4gICAgICAgICAgICBjb25zdCBoYXNEZWZhdWx0SWQgPSBnZXRUYWJsZUNvbHVtbnModXNlcnNUYWJsZSlbXCJpZFwiXVtcImhhc0RlZmF1bHRcIl07XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAgICAgLmluc2VydCh1c2Vyc1RhYmxlKVxuICAgICAgICAgICAgICAgIC52YWx1ZXMoaGFzRGVmYXVsdElkID8gaW5zZXJ0RGF0YSA6IHsgLi4uaW5zZXJ0RGF0YSwgaWQgfSlcbiAgICAgICAgICAgICAgICAucmV0dXJuaW5nKClcbiAgICAgICAgICAgICAgICAuZ2V0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGdldFVzZXIodXNlcklkKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAgICAgLmZyb20odXNlcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEodXNlcnNUYWJsZS5pZCwgdXNlcklkKSlcbiAgICAgICAgICAgICAgICAuZ2V0KCkpID8/IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRVc2VyQnlFbWFpbChlbWFpbCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAgICAgICAgIC5mcm9tKHVzZXJzVGFibGUpXG4gICAgICAgICAgICAgICAgLndoZXJlKGVxKHVzZXJzVGFibGUuZW1haWwsIGVtYWlsKSlcbiAgICAgICAgICAgICAgICAuZ2V0KCkpID8/IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjcmVhdGVTZXNzaW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnQuaW5zZXJ0KHNlc3Npb25zVGFibGUpLnZhbHVlcyhkYXRhKS5yZXR1cm5pbmcoKS5nZXQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0U2Vzc2lvbkFuZFVzZXIoc2Vzc2lvblRva2VuKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLnNlbGVjdCh7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbjogc2Vzc2lvbnNUYWJsZSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2Vyc1RhYmxlLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZnJvbShzZXNzaW9uc1RhYmxlKVxuICAgICAgICAgICAgICAgIC53aGVyZShlcShzZXNzaW9uc1RhYmxlLnNlc3Npb25Ub2tlbiwgc2Vzc2lvblRva2VuKSlcbiAgICAgICAgICAgICAgICAuaW5uZXJKb2luKHVzZXJzVGFibGUsIGVxKHVzZXJzVGFibGUuaWQsIHNlc3Npb25zVGFibGUudXNlcklkKSlcbiAgICAgICAgICAgICAgICAuZ2V0KCkpID8/IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyB1cGRhdGVVc2VyKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghZGF0YS5pZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHVzZXIgaWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLnVwZGF0ZSh1c2Vyc1RhYmxlKVxuICAgICAgICAgICAgICAgIC5zZXQoZGF0YSlcbiAgICAgICAgICAgICAgICAud2hlcmUoZXEodXNlcnNUYWJsZS5pZCwgZGF0YS5pZCkpXG4gICAgICAgICAgICAgICAgLnJldHVybmluZygpXG4gICAgICAgICAgICAgICAgLmdldCgpO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG5vdCBmb3VuZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyB1cGRhdGVTZXNzaW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgICAgIC51cGRhdGUoc2Vzc2lvbnNUYWJsZSlcbiAgICAgICAgICAgICAgICAuc2V0KGRhdGEpXG4gICAgICAgICAgICAgICAgLndoZXJlKGVxKHNlc3Npb25zVGFibGUuc2Vzc2lvblRva2VuLCBkYXRhLnNlc3Npb25Ub2tlbikpXG4gICAgICAgICAgICAgICAgLnJldHVybmluZygpXG4gICAgICAgICAgICAgICAgLmdldCgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCA/PyBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBsaW5rQWNjb3VudChkYXRhKSB7XG4gICAgICAgICAgICBhd2FpdCBjbGllbnQuaW5zZXJ0KGFjY291bnRzVGFibGUpLnZhbHVlcyhkYXRhKS5ydW4oKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0VXNlckJ5QWNjb3VudChhY2NvdW50KSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnRcbiAgICAgICAgICAgICAgICAuc2VsZWN0KHtcbiAgICAgICAgICAgICAgICBhY2NvdW50OiBhY2NvdW50c1RhYmxlLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJzVGFibGUsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5mcm9tKGFjY291bnRzVGFibGUpXG4gICAgICAgICAgICAgICAgLmlubmVySm9pbih1c2Vyc1RhYmxlLCBlcShhY2NvdW50c1RhYmxlLnVzZXJJZCwgdXNlcnNUYWJsZS5pZCkpXG4gICAgICAgICAgICAgICAgLndoZXJlKGFuZChlcShhY2NvdW50c1RhYmxlLnByb3ZpZGVyLCBhY2NvdW50LnByb3ZpZGVyKSwgZXEoYWNjb3VudHNUYWJsZS5wcm92aWRlckFjY291bnRJZCwgYWNjb3VudC5wcm92aWRlckFjY291bnRJZCkpKVxuICAgICAgICAgICAgICAgIC5nZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSByZXN1bHQ/LnVzZXIgPz8gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBkZWxldGVTZXNzaW9uKHNlc3Npb25Ub2tlbikge1xuICAgICAgICAgICAgYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLmRlbGV0ZShzZXNzaW9uc1RhYmxlKVxuICAgICAgICAgICAgICAgIC53aGVyZShlcShzZXNzaW9uc1RhYmxlLnNlc3Npb25Ub2tlbiwgc2Vzc2lvblRva2VuKSlcbiAgICAgICAgICAgICAgICAucnVuKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNyZWF0ZVZlcmlmaWNhdGlvblRva2VuKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRcbiAgICAgICAgICAgICAgICAuaW5zZXJ0KHZlcmlmaWNhdGlvblRva2Vuc1RhYmxlKVxuICAgICAgICAgICAgICAgIC52YWx1ZXMoZGF0YSlcbiAgICAgICAgICAgICAgICAucmV0dXJuaW5nKClcbiAgICAgICAgICAgICAgICAuZ2V0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHVzZVZlcmlmaWNhdGlvblRva2VuKHBhcmFtcykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLmRlbGV0ZSh2ZXJpZmljYXRpb25Ub2tlbnNUYWJsZSlcbiAgICAgICAgICAgICAgICAud2hlcmUoYW5kKGVxKHZlcmlmaWNhdGlvblRva2Vuc1RhYmxlLmlkZW50aWZpZXIsIHBhcmFtcy5pZGVudGlmaWVyKSwgZXEodmVyaWZpY2F0aW9uVG9rZW5zVGFibGUudG9rZW4sIHBhcmFtcy50b2tlbikpKVxuICAgICAgICAgICAgICAgIC5yZXR1cm5pbmcoKVxuICAgICAgICAgICAgICAgIC5nZXQoKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgPz8gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZGVsZXRlVXNlcihpZCkge1xuICAgICAgICAgICAgYXdhaXQgY2xpZW50LmRlbGV0ZSh1c2Vyc1RhYmxlKS53aGVyZShlcSh1c2Vyc1RhYmxlLmlkLCBpZCkpLnJ1bigpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyB1bmxpbmtBY2NvdW50KHBhcmFtcykge1xuICAgICAgICAgICAgYXdhaXQgY2xpZW50XG4gICAgICAgICAgICAgICAgLmRlbGV0ZShhY2NvdW50c1RhYmxlKVxuICAgICAgICAgICAgICAgIC53aGVyZShhbmQoZXEoYWNjb3VudHNUYWJsZS5wcm92aWRlciwgcGFyYW1zLnByb3ZpZGVyKSwgZXEoYWNjb3VudHNUYWJsZS5wcm92aWRlckFjY291bnRJZCwgcGFyYW1zLnByb3ZpZGVyQWNjb3VudElkKSkpXG4gICAgICAgICAgICAgICAgLnJ1bigpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBnZXRBY2NvdW50KHByb3ZpZGVyQWNjb3VudElkLCBwcm92aWRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGNsaWVudFxuICAgICAgICAgICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAgICAgICAgIC5mcm9tKGFjY291bnRzVGFibGUpXG4gICAgICAgICAgICAgICAgLndoZXJlKGFuZChlcShhY2NvdW50c1RhYmxlLnByb3ZpZGVyLCBwcm92aWRlciksIGVxKGFjY291bnRzVGFibGUucHJvdmlkZXJBY2NvdW50SWQsIHByb3ZpZGVyQWNjb3VudElkKSkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzWzBdID8/IG51bGwpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjcmVhdGVBdXRoZW50aWNhdG9yKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRcbiAgICAgICAgICAgICAgICAuaW5zZXJ0KGF1dGhlbnRpY2F0b3JzVGFibGUpXG4gICAgICAgICAgICAgICAgLnZhbHVlcyhkYXRhKVxuICAgICAgICAgICAgICAgIC5yZXR1cm5pbmcoKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlc1swXSA/PyBudWxsKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0QXV0aGVudGljYXRvcihjcmVkZW50aWFsSUQpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnRcbiAgICAgICAgICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgICAgICAgICAuZnJvbShhdXRoZW50aWNhdG9yc1RhYmxlKVxuICAgICAgICAgICAgICAgIC53aGVyZShlcShhdXRoZW50aWNhdG9yc1RhYmxlLmNyZWRlbnRpYWxJRCwgY3JlZGVudGlhbElEKSlcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXNbMF0gPz8gbnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGxpc3RBdXRoZW50aWNhdG9yc0J5VXNlcklkKHVzZXJJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsaWVudFxuICAgICAgICAgICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAgICAgICAgIC5mcm9tKGF1dGhlbnRpY2F0b3JzVGFibGUpXG4gICAgICAgICAgICAgICAgLndoZXJlKGVxKGF1dGhlbnRpY2F0b3JzVGFibGUudXNlcklkLCB1c2VySWQpKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcyk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHVwZGF0ZUF1dGhlbnRpY2F0b3JDb3VudGVyKGNyZWRlbnRpYWxJRCwgbmV3Q291bnRlcikge1xuICAgICAgICAgICAgY29uc3QgYXV0aGVudGljYXRvciA9IGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgICAgIC51cGRhdGUoYXV0aGVudGljYXRvcnNUYWJsZSlcbiAgICAgICAgICAgICAgICAuc2V0KHsgY291bnRlcjogbmV3Q291bnRlciB9KVxuICAgICAgICAgICAgICAgIC53aGVyZShlcShhdXRoZW50aWNhdG9yc1RhYmxlLmNyZWRlbnRpYWxJRCwgY3JlZGVudGlhbElEKSlcbiAgICAgICAgICAgICAgICAucmV0dXJuaW5nKClcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXNbMF0pO1xuICAgICAgICAgICAgaWYgKCFhdXRoZW50aWNhdG9yKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF1dGhlbnRpY2F0b3Igbm90IGZvdW5kLlwiKTtcbiAgICAgICAgICAgIHJldHVybiBhdXRoZW50aWNhdG9yO1xuICAgICAgICB9LFxuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@auth+drizzle-adapter@1.11.0/node_modules/@auth/drizzle-adapter/lib/sqlite.js\n");

/***/ })

};
;